(this.webpackJsonpustphims=this.webpackJsonpustphims||[]).push([[0],{223:function(e,a,t){e.exports=t.p+"static/media/logo.dc773f1f.jpg"},224:function(e,a,t){e.exports=t.p+"static/media/marina.3d4d22a6.png"},239:function(e,a,t){e.exports=t.p+"static/media/Template.06118ea9.xlsx"},377:function(e,a){},442:function(e,a,t){e.exports=t.p+"static/media/dto.1f15fbb3.png"},450:function(e,a,t){e.exports=t.p+"static/media/icon.c0920caa.png"},470:function(e,a,t){e.exports=t(752)},476:function(e,a,t){},481:function(e,a,t){},500:function(e,a,t){},502:function(e,a,t){},514:function(e,a){},515:function(e,a){},516:function(e,a,t){},748:function(e,a,t){},749:function(e,a,t){},750:function(e,a,t){},751:function(e,a,t){},752:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(18),c=t.n(l),s=(t(475),t(476),t(3)),o=t(124),i=t(42),m=t(248),u=Object(n.createContext)();function d(){return Object(n.useContext)(u)}var p=function(e){var a=e.component,t=Object(m.a)(e,["component"]),n=d();return r.a.createElement(i.b,Object.assign({},t,{render:function(e){return function(e){return null!==e.authTokens&&!(e.authTokens.expires_in>Date.now())}(n)?r.a.createElement(a,e):r.a.createElement(i.a,{to:"/login"})}}))};var b=function(e){var a=e.component,t=Object(m.a)(e,["component"]),n=d();return r.a.createElement(i.b,Object.assign({},t,{render:function(e){return function(e){return null!==e.authTokens&&(!(e.authTokens.expires_in>Date.now())&&"main"===e.authTokens.details.type)}(n)?r.a.createElement(a,e):r.a.createElement(i.a,{to:"/"})}}))},f=(t(481),t(73)),E=t.n(f),g=E.a.create({baseURL:"https://passengertracer.net/apis/api/v1/"}),h=t(80),v=t(225),O=t(762),j=t(183),y=t(78),N=t.n(y),S=t(79),C=t.n(S),x=t(446),w=t.n(x),k=t(447),_=t.n(k),T=t(448),D=t.n(T),P=t(449),A=t.n(P),M=t(445),W=t.n(M),I=t(130),q=t(784),z=t(785),L=t(783),B=t(776),U=t(777),F=t(782),R=t(7),H=t(8),Y=(t(500),t(223)),G=t.n(Y),V=t(224),J=t.n(V),K=t(442),X=t.n(K),Q=t(140),Z=t(141),$=t(153),ee=t(152),ae=function(e){Object($.a)(t,e);var a=Object(ee.a)(t);function t(){return Object(Q.a)(this,t),a.apply(this,arguments)}return Object(Z.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("span",{className:"text-danger text-center p-1"},r.a.createElement(R.a,{icon:H.z,className:"text-danger mr-1"}),"Error:"," ",this.props.children))}}]),t}(n.Component),te=function(e){Object($.a)(t,e);var a=Object(ee.a)(t);function t(){return Object(Q.a)(this,t),a.apply(this,arguments)}return Object(Z.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("span",{className:"text-info text-center p-1"},r.a.createElement(R.a,{icon:H.n,className:"text-info mr-1"}),r.a.createElement("span",null,this.props.children)))}}]),t}(n.Component),ne=t(809),re=function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),m=i[0],u=i[1],d=Object(n.useState)("Sorry, something wen't wrong"),p=Object(s.a)(d,2),b=p[0],f=p[1],E=Object(n.useState)(!1),h=Object(s.a)(E,2),O=h[0],j=h[1];return r.a.createElement(B.a,{xs:12,style:{marginTop:"4%"}},r.a.createElement(U.a,{onSubmit:function(e){return function(e){e.preventDefault();var a=document.querySelector("input[name=email]").value;""!==a?(c(!0),u(!1),j(!1),g.post("auth/carrier/login",{email:a}).then((function(e){c(!1),200===e.status?!1===e.data.status?(f(e.data.error),u(!0)):j(!0):u(!0)})).catch((function(e){c(!1),u(!0)}))):(f("Please enter your email"),u(!0))}(e)},autoComplete:"off"},r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2 text-center"},m&&r.a.createElement(ae,null,b)),r.a.createElement(B.a,{xs:12,className:"ml-2 mb-1"},r.a.createElement("span",null,"Forgot your password?"),r.a.createElement("br",null)),O&&r.a.createElement(B.a,{xs:12,className:"text-center mt-1"},r.a.createElement("small",{className:"text-success"},r.a.createElement(R.a,{icon:H.n})," Check your email inbox for the link we sent to you.")),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4"},r.a.createElement(v.a,{type:"email",name:"email",placeholder:"Email",label:"Email",fullWidth:!0,required:!0})),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 pt-1 mt-4 mb-4"},l?r.a.createElement("div",{className:"text-center mt-1",style:{minHeight:"100px"}},r.a.createElement(F.a,{className:"mt-4",style:{width:"2rem",height:"2rem"},color:"primary"}),r.a.createElement("br",null),r.a.createElement("span",{className:"mt-1"},"Processing...")):r.a.createElement("div",null,r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary",className:"pt-1",disabled:l,fullWidth:!0},r.a.createElement("span",null,"Submit"),r.a.createElement(R.a,{className:"pl-1",icon:H.q})),r.a.createElement(L.a,{className:"mt-4 pt-2"},r.a.createElement(B.a,{md:12,className:"text-center"},r.a.createElement("a",{href:"#",variant:"link",onClick:function(a){return function(a){a.preventDefault(),e.toggle()}(a)},className:"pt-1 btn text-primary",disabled:l},r.a.createElement(R.a,{className:"pr-1",icon:H.c}),r.a.createElement("span",null,"Back to Login"))))))))},le=Object(h.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)}},small:{width:e.spacing(2.3),height:e.spacing(2.3),float:"left",marginLeft:"7px",marginTop:"3px"},large:{width:e.spacing(7),height:e.spacing(7)}}})),ce=function(e){var a=le(),t=d(),l=t.authTokens,c=t.setAuthTokens,o=Object(n.useState)(!1),m=Object(s.a)(o,2),u=m[0],p=m[1],b=Object(n.useState)(!1),f=Object(s.a)(b,2),E=f[0],h=f[1],y=Object(n.useState)("Sorry, Server Error"),S=Object(s.a)(y,2),x=S[0],k=S[1],T=Object(n.useState)(!1),P=Object(s.a)(T,2),M=P[0],Y=P[1],V=Object(n.useState)("Sorry, Something Wen't Wrong"),K=Object(s.a)(V,2),Q=K[0],Z=K[1],$=Object(n.useState)(!1),ee=Object(s.a)($,2),ce=ee[0],se=ee[1],oe=Object(n.useState)(!1),ie=Object(s.a)(oe,2),me=ie[0],ue=ie[1],de=function(){return ue(!me)};if(null!==l&&l.expires_in<Date.now())return r.a.createElement(i.a,{to:"/"});return r.a.createElement(q.a,{style:{width:"959px",marginTop:"5%"}},r.a.createElement("a",{href:"https://passengertracer.net/",rel:"noopener noreferrer",className:"btn m-0 p-0 mb-1 text-white"},r.a.createElement(W.a,{style:{fontSize:"0.9em"}})," Go Back to Portal"),r.a.createElement(z.a,{className:"bg-primary p-0 m-0",style:{borderRadius:"0px",border:"none",opacity:"0.9"}},r.a.createElement(L.a,{className:"p-0 m-0"},r.a.createElement(B.a,{xs:6,className:"text-center text-white p-2"},r.a.createElement("img",{className:"mt-5",src:J.a,width:"90",height:"110",alt:"Marina Logo"}),r.a.createElement("a",{href:"https://marina.gov.ph/",rel:"noopener noreferrer",target:"_blanks",className:"text-white ml-1 mr-1",style:{textDecoration:"none"}},r.a.createElement("h3",{className:"mt-4"},"Maritime Industry Authority")),r.a.createElement("div",{className:"text-center pl-5 pr-5 ml-0"},"Follow us on: ",r.a.createElement("br",null),r.a.createElement("a",{href:"https://www.facebook.com/DOTrMARINAPH",rel:"noopener noreferrer",target:"_blanks",className:"text-white mr-1",style:{textDecoration:"none"}},r.a.createElement(w.a,{className:a.large})),r.a.createElement("a",{href:"https://twitter.com/DOTrMARINAPH",rel:"noopener noreferrer",target:"_blanks",className:"text-white ml-1 mr-1",style:{textDecoration:"none"}},r.a.createElement(_.a,{className:a.large})),r.a.createElement("a",{href:"https://www.instagram.com/dotrmarinaph/",rel:"noopener noreferrer",target:"_blanks",className:"text-white ml-1 mr-1",style:{textDecoration:"none"}},r.a.createElement(D.a,{className:a.large})),r.a.createElement("a",{href:"https://www.youtube.com/channel/UCK9SPcPFhiWLBUXAzlQqsxg",rel:"noopener noreferrer",target:"_blanks",className:"text-white ml-1 mr-1",style:{textDecoration:"none"}},r.a.createElement(A.a,{className:a.large}))),r.a.createElement("div",{style:{fontSize:"0.9rem",marginTop:"25%",marginLeft:"10%"}},r.a.createElement("span",{className:"float-left"},"Powered By: "),r.a.createElement("a",{target:"_blank",href:"https://www.facebook.com/ustpdigitaltransformation",rel:"noopener noreferrer",className:"text-white",style:{textDecoration:"none"}},r.a.createElement(ne.a,{src:X.a,className:a.small}),r.a.createElement("span",{className:"float-left ml-1"},"USTP - Digital Transformation Office")))),r.a.createElement(B.a,{xs:6,className:"p-0 m-0"},r.a.createElement(z.a,{className:"p-0 m-0",style:{borderRadius:"0px"}},r.a.createElement(B.a,{xs:12,className:"mt-4 text-center"},r.a.createElement("img",{className:"mt-2",src:G.a,style:{width:"8rem",height:"10rem"},alt:"Passenger eTracer Logo"}),r.a.createElement("h5",null,"Transport Module")),!me&&r.a.createElement(B.a,{xs:12},r.a.createElement(U.a,{onSubmit:function(e){return function(e){e.preventDefault();var a=document.querySelector("input[name=username]").value,t=document.querySelector("input[name=password]").value;""!==a&&""!==t?(p(!0),h(!1),Y(!1),g.post("auth/carrier/login",{username:a,password:t}).then((function(e){p(!1),200===e.status?!1===e.data.status?(k(e.data.error),h(!0)):c(e.data):254===e.status?(Z("Pending account approval, contact the Admin"),Y(!0)):h(!0)})).catch((function(e){p(!1),h(!0)}))):(k("Please enter a username and password"),h(!0))}(e)},autoComplete:"off"},r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2 text-center"},E&&r.a.createElement(ae,null,x),M&&r.a.createElement(te,null,Q)),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2"},r.a.createElement(v.a,{name:"username",placeholder:"Username",label:"Username",fullWidth:!0,required:!0})),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2"},r.a.createElement(v.a,{type:ce?"text":"password",name:"password",placeholder:"Password",label:"Password",fullWidth:!0,required:!0,InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(j.a,{onClick:function(){return se(!ce)}},ce?r.a.createElement(N.a,null):r.a.createElement(C.a,null)))}})),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mt-3 mb-4"},u?r.a.createElement("div",{className:"text-center mt-1",style:{minHeight:"100px"}},r.a.createElement(F.a,{className:"mt-4",style:{width:"2rem",height:"2rem"},color:"primary"}),r.a.createElement("br",null),r.a.createElement("span",{className:"mt-1"},"Processing...")):r.a.createElement("div",null,r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary",className:"pt-1",disabled:u,fullWidth:!0},r.a.createElement("span",null,"LOGIN"),r.a.createElement(R.a,{className:"pl-1",icon:H.y})),r.a.createElement(L.a,{className:"mt-4 pt-1"},r.a.createElement(B.a,{md:6,className:"text-left ml-0 pl-1"},r.a.createElement("a",{href:"#",variant:"link",onClick:function(e){return function(e){e.preventDefault(),de()}(e)},className:"pt-1 btn text-primary",disabled:u},r.a.createElement("span",null,"Forgot Password"),r.a.createElement(R.a,{className:"pl-1",icon:H.u}))),r.a.createElement(B.a,{md:6,className:"text-right mr-0 pr-1"},r.a.createElement("a",{href:"register",variant:"link",className:"pt-1 btn text-primary",disabled:u},r.a.createElement(R.a,{className:"pr-1",icon:H.E}),r.a.createElement("span",null,"Register Here")))))))),me&&r.a.createElement(re,{toggle:de}))))))},se=(t(502),t(12)),oe=t.n(se),ie=Object(n.createContext)();function me(){return Object(n.useContext)(ie)}var ue=t(370),de=function(e){var a=me().companyOptions,t=Object(n.useState)(""),l=Object(s.a)(t,2),c=l[0],o=l[1];return r.a.createElement("div",null,r.a.createElement(v.a,{select:!0,label:"Select Company",name:"company_id",value:e.companyName||c,onChange:function(t){return function(t){if(o(t),e.setCompanyId&&e.setCompanyId(t),e.setCompany){var n=a.filter((function(e){return e.value===t}));e.setCompany(n[0].label)}}(t.target.value)},fullWidth:!0,required:!0,disabled:e.disabled||!1,className:"text-left"},a.map((function(e){return r.a.createElement(ue.a,{key:e.value,value:e.value},e.label)}))))},pe=function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],c=t[1],o=Object(n.useState)(!1),i=Object(s.a)(o,2),m=i[0],u=i[1],p=Object(n.useState)("Sorry, Server Error"),b=Object(s.a)(p,2),f=b[0],h=b[1],y=d().authTokens,S=Object(n.useState)(!1),x=Object(s.a)(S,2),w=x[0],k=x[1],_=Object(n.useState)(!1),T=Object(s.a)(_,2),D=T[0],P=T[1],A=Object(n.useState)([]),M=Object(s.a)(A,2),W=M[0],Y=M[1],V=Object(n.useState)(""),K=Object(s.a)(V,2),X=K[0],Q=K[1],Z=Object(n.useState)(""),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ne=Object(n.useCallback)((function(){(function(){var e=E.a.cancelToken;return g.get("company",{cancelToken:e})})().then((function(e){var a=[];if(e.data.length>0)for(var t in e.data){var n={value:e.data[t].id,label:e.data[t].name};a.push(n)}Y(a)}))}),[]);return Object(n.useEffect)((function(){return null!==y&&y.expires_in<Date.now()?e.history.push("/"):ne(),function(){}}),[]),r.a.createElement(ie.Provider,{value:{companyOptions:W}},r.a.createElement(q.a,{className:"rounded",style:{width:"762px",marginTop:"2%"}},r.a.createElement(z.a,{className:"bg-primary p-0 m-0 rounded",style:{border:"none",opacity:"0.88"}},r.a.createElement(L.a,{className:"p-0 m-0"},r.a.createElement(B.a,{xs:12,className:"p-0 m-0"},r.a.createElement(z.a,{className:"p-0 m-0",style:{borderRadius:"0px"}},r.a.createElement(B.a,{xs:12,className:"mt-4 text-center"},r.a.createElement("img",{className:"mt-1",src:J.a,style:{width:"4rem",height:"4.5rem"},alt:"MARINA Logo"}),r.a.createElement("img",{className:"mt-1",src:G.a,style:{width:"5rem",height:"6rem"},alt:"Passenger eTracer Logo"})),r.a.createElement(B.a,{xs:12,className:"mt-1 text-center"},r.a.createElement("h5",null,r.a.createElement(R.a,{className:"pr-1",icon:H.a})," Register New Company Account")),r.a.createElement(B.a,{xs:{size:10,offset:1}},r.a.createElement(U.a,{onSubmit:function(a){return function(a){a.preventDefault();var t=document.querySelector("input[name=mobile]").value,n=document.querySelector("input[name=email]").value,r=document.querySelector("input[name=address]").value,l=document.querySelector("input[name=username]").value,s=document.querySelector("input[name=password]").value,o=document.querySelector("input[name=repassword]").value;if(""!==l&&""!==s){if(s!==o)return h("Password doesn't match"),u(!0),null;c(!0);var i={transport_company_id:ee,carrier_name:X,carrier_contact:t,carrier_address:r,carrier_email:n,username:l,password:s,type:"main"};g.post("account/register",i).then((function(a){(c(!1),200===a.status)?0===a.data.error?(h(a.data.message),u(!0)):oe.a.fire("Transaction Completed!","Account Successfully Registered!","success").then((function(){e.history.push("/")})):254===a.status?(h(a.data.message),u(!0)):u(!0)})).catch((function(e){c(!1),u(!0)}))}else h("Please enter a username and password"),u(!0)}(a)},autoComplete:"off"},r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2 text-center"},m&&r.a.createElement(ae,null,f)),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2"},r.a.createElement(de,{setCompany:Q,setCompanyId:te})),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2"},r.a.createElement(v.a,{name:"mobile",placeholder:"Contact Number",label:"Contact Number",fullWidth:!0,required:!0})),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2"},r.a.createElement(v.a,{name:"email",placeholder:"Email",label:"Email",fullWidth:!0,required:!0})),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2"},r.a.createElement(v.a,{name:"address",placeholder:"Address",label:"Address",fullWidth:!0,required:!0})),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2"},r.a.createElement(v.a,{name:"username",placeholder:"Username",label:"Username",fullWidth:!0,required:!0})),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2"},r.a.createElement(v.a,{type:w?"text":"password",name:"password",placeholder:"Password",label:"Password",fullWidth:!0,required:!0,InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(j.a,{onClick:function(){return k(!w)}},w?r.a.createElement(N.a,null):r.a.createElement(C.a,null)))}})),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mb-2"},r.a.createElement(v.a,{type:D?"text":"password",name:"repassword",placeholder:"Re-type Password",label:"Re-type Password",fullWidth:!0,required:!0,InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(j.a,{onClick:function(){return P(!D)}},D?r.a.createElement(N.a,null):r.a.createElement(C.a,null)))}})),r.a.createElement(B.a,{xs:12,className:"pl-4 pr-4 mt-3 mb-2"},l?r.a.createElement("div",{className:"text-center mt-1",style:{minHeight:"100px"}},r.a.createElement(F.a,{className:"mt-4",style:{width:"2rem",height:"2rem"},color:"primary"}),r.a.createElement("br",null),r.a.createElement("span",{className:"mt-1"},"Processing...")):r.a.createElement("div",null,r.a.createElement(I.a,{type:"submit",variant:"contained",color:"primary",className:"pt-1",disabled:l,fullWidth:!0},r.a.createElement("span",null,"Register"),r.a.createElement(R.a,{className:"pl-1",icon:H.g})),r.a.createElement("div",{className:"text-center m-0 p-0 mt-2"},r.a.createElement("span",null,"or")),r.a.createElement("div",{className:"text-center"},r.a.createElement("a",{href:"login",variant:"contained",color:"primary",className:"pt-1 btn",disabled:l},r.a.createElement("span",null,"LOGIN HERE"),r.a.createElement(R.a,{className:"pl-1",icon:H.y})))))))))))))},be=t(184),fe=t(300),Ee=Object(n.createContext)();function ge(){return Object(n.useContext)(Ee)}var he=t(450),ve=t.n(he),Oe=t(808),je=t(787),ye=t(788),Ne=t(789),Se=t(790),Ce=t(791),xe=t(155),we=t(786),ke=t(293),_e=t(81);function Te(e){return r.a.createElement(ke.a,{display:"flex",alignItems:"center"},r.a.createElement(ke.a,{width:"100%",mr:1},r.a.createElement(we.a,Object.assign({variant:"determinate"},e))),r.a.createElement(ke.a,{minWidth:35},r.a.createElement(_e.a,{variant:"body2",color:"textSecondary"},"".concat(Math.round(e.value),"%"))))}var De=Object(h.a)({root:{width:"100%"}}),Pe=function(e){var a=De(),t=Object(n.useState)(0),l=Object(s.a)(t,2),c=l[0],o=l[1];return Object(n.useEffect)((function(){var e=setInterval((function(){o((function(e){return e<89&&e<100?e+Math.floor(10*Math.random())+1:99}))}),800);return function(){clearInterval(e)}}),[]),r.a.createElement("div",{className:a.root},r.a.createElement(_e.a,null,e.title),r.a.createElement(Te,{value:c}))},Ae=function(e){var a=d().authTokens,t=Object(n.useState)(!1),l=Object(s.a)(t,2),c=l[0],o=l[1],i=Object(n.useState)(!1),m=Object(s.a)(i,2),u=m[0],p=m[1],b=Object(n.useState)(!1),f=Object(s.a)(b,2),E=f[0],h=f[1],y=Object(n.useState)(!1),S=Object(s.a)(y,2),x=S[0],w=S[1],k=Object(n.useState)(!1),_=Object(s.a)(k,2),T=_[0],D=_[1],P=Object(n.useState)(!1),A=Object(s.a)(P,2),M=A[0],W=A[1],I=Object(n.useState)("Invalid Input"),q=Object(s.a)(I,2),U=q[0],F=q[1],Y=Object(n.useState)(!1),G=Object(s.a)(Y,2),V=G[0],J=G[1],K=Object(n.useState)(""),X=Object(s.a)(K,2),Q=X[0],Z=X[1],$=Object(n.useState)(""),ee=Object(s.a)($,2),ae=ee[0],te=ee[1];return r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,toggle:e.toggle,className:"modal-md",style:{marginLeft:"40%",marginTop:"7%",color:"#1a1751"}},r.a.createElement(je.a,{toggle:e.toggle},r.a.createElement(R.a,{icon:H.o})," Change Password ",r.a.createElement("br",null)),r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault();var n=a.access_token;if(V&&F("Minimum password length is 6"),T&&F("Password doesn't match"),T||V)W(!0);else{W(!1),o(!0);var r={password:ae,new_password:Q};g.post("auth/carrier/update-password",r,{headers:{Authorization:"bearer "+n}}).then((function(a){o(!1),a.data.status?(oe.a.fire("Transaction Completed!","Password Successfully Updated!","success"),e.toggle()):(F(a.data.message),oe.a.fire("Transaction Failed!",a.data.message,"error"))})).catch((function(e){o(!1),oe.a.fire("Transaction Failed!","Failed to Update Password!","error")}))}}(t)}},r.a.createElement(ye.a,null,M&&r.a.createElement("div",{className:"text-left card p-1 bg-danger"},r.a.createElement("span",{className:"text-white ml-2"},r.a.createElement(R.a,{icon:H.A})," ",U)),r.a.createElement(L.a,{className:"p-2 pt-0"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(L.a,null,r.a.createElement("div",{className:"col-md-12 p-1"},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"p-1 m-1"},r.a.createElement("div",{className:"mt-1 mb-1"},r.a.createElement(v.a,{name:"old_password",label:"Old Password",type:x?"text":"password",onChange:function(e){return te(e.target.value)},fullWidth:!0,required:!0,InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(j.a,{onClick:function(){return w(!x)}},x?r.a.createElement(N.a,null):r.a.createElement(C.a,null)))}})),r.a.createElement("div",null,r.a.createElement(v.a,{type:u?"text":"password",name:"new_password",label:"New Password",onChange:function(e){return a=e.target.value,Z(a),W(!1),void(a.replace(/\s+/g,"").length>=6?(J(!1),D(a!==Q)):J(!0));var a},error:V,fullWidth:!0,required:!0,InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(j.a,{onClick:function(){return p(!u)}},u?r.a.createElement(N.a,null):r.a.createElement(C.a,null)))}})),r.a.createElement("div",{className:"mt-1 mb-1"},r.a.createElement(v.a,{error:T,type:E?"text":"password",name:"confirm_password",label:"Confirm Password",onChange:function(e){return a=e.target.value,W(!1),void D(a!==Q);var a},fullWidth:!0,required:!0,InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(j.a,{onClick:function(){return h(!E)}},E?r.a.createElement(N.a,null):r.a.createElement(C.a,null)))}}))))))),c&&r.a.createElement(B.a,{md:12},r.a.createElement(xe.a,{className:"p-2 m-2 mt-3"},r.a.createElement(Pe,{title:"Updating Password"}))))),r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{type:"submit",color:"primary",disabled:c||M,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.w})," Save")," ",r.a.createElement(Ce.a,{color:"danger",onClick:e.toggle,disabled:c,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.G})," Close")))))},Me=Object(n.createContext)();function We(){return Object(n.useContext)(Me)}var Ie=t(375),qe=t(792),ze=function(e){var a=d().authTokens,t=a.details,l=We(),c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],m=o[1],u=Object(n.useState)(!1),p=Object(s.a)(u,2),b=p[0],f=p[1],E=Object(n.useState)(!0),h=Object(s.a)(E,2),O=h[0],j=h[1],y=Object(n.useState)(""),N=Object(s.a)(y,2),S=N[0],C=N[1],x=Object(n.useState)(""),w=Object(s.a)(x,2),k=w[0],_=w[1],T=Object(n.useState)(""),D=Object(s.a)(T,2),P=D[0],A=D[1],M=Object(n.useState)(""),W=Object(s.a)(M,2),I=W[0],q=W[1],U=Object(n.useState)(""),F=Object(s.a)(U,2),Y=F[0],G=F[1];return Object(n.useEffect)((function(){var e=l.profileDetails;return C(e.id),_(e.carrier_name),A(e.carrier_contact),G(e.carrier_email),q(e.carrier_address),function(){}}),[]),r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,toggle:e.toggle,className:"modal-md",style:{marginLeft:"40%",marginTop:"7%",color:"#1a1751"}},r.a.createElement(je.a,{toggle:e.toggle},r.a.createElement(R.a,{icon:H.D})," Update Profile ",r.a.createElement("br",null)),r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault(),m(!0);var n={id:S,carrier:k,contact:P,address:I,email:Y};g.post("auth/carrier/update",n,{headers:{Authorization:"bearer "+a.access_token}}).then((function(a){a.data.status?(m(!1),oe.a.fire("Transaction Completed!","Profile Updated!","success"),l.setUsername(k),l.getProfileDetails(),e.toggle()):(m(!1),oe.a.fire("Transaction Failed!",a.data.message,"error"))})).catch((function(e){m(!1),oe.a.fire("Transaction Failed!","error")}))}(t)}},r.a.createElement(ye.a,null,r.a.createElement(Ie.a,{className:"ml-2",control:r.a.createElement(qe.a,{checked:b,onChange:function(){f(!b),j(!O||null)},color:"primary"}),label:"Edit"}),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(L.a,null,r.a.createElement("div",{className:"col-md-12 p-1"},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"p-1 m-1"},"main"===t.type&&r.a.createElement("div",{className:"mt-1 mb-1"},r.a.createElement(v.a,{name:"carrier",label:"Name",value:k||"",onChange:function(e){return _(e.target.value)},fullWidth:!0,required:!0,disabled:O})),r.a.createElement("div",null,r.a.createElement(v.a,{name:"contact",label:"Contact",value:P||"",onChange:function(e){return A(e.target.value)},fullWidth:!0,required:!0,disabled:O})),r.a.createElement("div",{className:"mt-1 mb-1"},r.a.createElement(v.a,{name:"email",label:"Email",value:Y||"",onChange:function(e){return G(e.target.value)},fullWidth:!0,required:!0,disabled:O})),r.a.createElement("div",{className:"mt-1 mb-1"},r.a.createElement(v.a,{name:"address",label:"Address",value:I||"",onChange:function(e){return q(e.target.value)},fullWidth:!0,required:!0,disabled:O}))))))),r.a.createElement(L.a,{className:"p-2 pt-0"},i&&r.a.createElement(B.a,{md:12},r.a.createElement(xe.a,{className:"p-2 m-2 mt-3"},r.a.createElement(Pe,{title:"Updating User Profile"}))))),r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{type:"submit",color:"primary",disabled:!b||i,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.w})," Save")," ",r.a.createElement(Ce.a,{color:"danger",onClick:e.toggle,disabled:i,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.G})," Close")))))},Le=t(74),Be=t(33),Ue=t(40),Fe=t(793),Re=t(435),He=function(e){var a=me().shipOptions,t=Object(n.useState)(""),l=Object(s.a)(t,2),c=l[0],o=l[1];return r.a.createElement("div",null,r.a.createElement(v.a,{select:!0,label:"Select a Ship",name:"shipName",value:e.shipName||c,onChange:function(t){return function(t){if(o(t),e.setShipName&&e.setShipName(t),e.getShipDetails&&e.getShipDetails(t),e.getShipSchedules&&e.getShipSchedules(t),e.setShiplabel){var n=a.filter((function(e){return e.value===t}));e.setShiplabel(n[0].label)}e.handleChangeShip&&e.handleChangeShip(t)}(t.target.value)},fullWidth:!0,required:!0,disabled:e.disabled||!1,className:"text-left"},a.map((function(e){return r.a.createElement(ue.a,{key:e.value,value:e.value},e.label)}))))},Ye=t(103),Ge=t.n(Ye),Ve=t(239),Je=t.n(Ve),Ke=function(e){var a=d().authTokens,t=new Be.a,l=We(),c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],m=o[1],u=Object(n.useState)(!1),p=Object(s.a)(u,2),b=p[0],f=p[1],E=Object(n.useState)("No Records Found"),h=Object(s.a)(E,2),O=h[0],j=h[1],y=Object(n.useState)(!1),N=Object(s.a)(y,2),S=N[0],C=N[1],x=Object(n.useState)(!1),w=Object(s.a)(x,2),k=w[0],_=w[1],T=Object(n.useState)(!1),D=Object(s.a)(T,2),P=D[0],A=D[1],M=Object(n.useState)(null),W=Object(s.a)(M,2),I=W[0],q=W[1],z=Object(n.useState)(null),U=Object(s.a)(z,2),F=U[0],Y=U[1],G=Object(n.useState)(null),V=Object(s.a)(G,2),J=V[0],K=V[1],X=Object(n.useState)(null),Q=Object(s.a)(X,2),Z=Q[0],$=Q[1],ee=Object(n.useState)(!1),te=Object(s.a)(ee,2),ne=te[0],re=te[1],le=Object(n.useState)("Daily"),ce=Object(s.a)(le,2),se=ce[0],oe=ce[1],ie=Object(n.useState)(!1),me=Object(s.a)(ie,2),ue=me[0],de=me[1],pe=Object(n.useState)(""),be=Object(s.a)(pe,2),fe=be[0],Ee=be[1],ge=Object(n.useState)(""),he=Object(s.a)(ge,2),ve=he[0],Ne=he[1],we=Object(n.useState)(""),ke=Object(s.a)(we,2),Te=ke[0],De=ke[1],Ae=Object(n.useState)(""),Me=Object(s.a)(Ae,2),qe=Me[0],ze=Me[1],Ye=Object(n.useState)(""),Ve=Object(s.a)(Ye,2),Ke=Ve[0],Xe=Ve[1],Qe=function(e,a){var t=1,n=2;switch(f(!1),de(e),C(!1),_(!1),A(!1),a){case t:oe("Daily"),C(!S);break;case n:oe("Monthly"),_(!k);break;default:oe("Custom"),A(!P)}},Ze=function(e){var a="",n="";e.preventDefault(),f(!1),m(!0);try{S&&(a=t.format(new Date(J),"Y-M-dd 00:00:00"),n=t.format(new Date(J),"Y-M-dd 23:59:59")),k&&(a=t.format(t.startOfMonth(new Date(Z)),"Y-M-dd 00:00:00"),n=t.format(t.endOfMonth(new Date(Z)),"Y-M-dd 23:59:59")),P&&(a=I,n=F),$e(a,n).then((function(t){if(Object.keys(t.data).length>0){try{!function(e){var a,t=e.records,n=void 0===t?[]:t,r=e.dates,l=void 0===r?[]:r,c=e.reportType,s=void 0===c?"":c,o=e.shipName,i=void 0===o?"":o,m=e.isDaily,u=void 0!==m&&m,d=e.carrierName,p=void 0===d?"":d,b=e.voyageRoute,f=void 0===b?"":b,E=e.voyageNumber,g=void 0===E?"":E,h=new Be.a;if(u)a=h.format(new Date(l[0]),"MMMM d, yyyy");else{var v=h.format(new Date(l[0]),"MMMM d"),O=h.format(new Date(l[1]),"d, yyyy");a="".concat(v,"-").concat(O)}n.length>0&&fetch(Je.a).then((function(e){return e.arrayBuffer()})).then((function(e){var t=Ge.a.read(e,{type:"array"}),r=t.Sheets[t.SheetNames[0]];r.A1.s={font:{sz:22,bold:!0,color:{rgb:"00000000"}},alignment:{vertical:"center",horizontal:"center"}},r.A2.s={font:{sz:11,color:{rgb:"00000000"}},alignment:{vertical:"center",horizontal:"center"}},Ge.a.utils.sheet_add_aoa(r,[["Name of Ship: ".concat(i.toUpperCase())]],{origin:"A3"}),r.A3.s={font:{sz:16,bold:!0,color:{rgb:"00000000"}}},r.A7.s={font:{sz:16,bold:!0,color:{rgb:"00000000"}}},Ge.a.utils.sheet_add_aoa(r,[["Name of Company/Operator: ".concat(p.toUpperCase())]],{origin:"A5"}),r.A5.s={font:{sz:16,bold:!0,color:{rgb:"00000000"}}},Ge.a.utils.sheet_add_aoa(r,[["Voyage Route/Link: ".concat(f.toUpperCase())]],{origin:"K3"}),r.K3.s={font:{sz:16,bold:!0,color:{rgb:"00000000"}}},Ge.a.utils.sheet_add_aoa(r,[["Date/Voyage Number: ".concat(a," / ").concat(g)]],{origin:"K5"}),r.K5.s={font:{sz:16,bold:!0,color:{rgb:"00000000"}}},Ge.a.utils.sheet_add_aoa(r,n,{origin:"A12"});for(var l=[],c=Ge.a.utils.decode_range(r["!ref"]),o=c.s.r;o<=c.e.r;++o)for(var m=c.s.c;m<=c.e.c;++m){var u={c:m,r:o};if(8===o)r[Ge.a.utils.encode_cell(u)].s={alignment:{vertical:"center",horizontal:"center",wrapText:!0}},l.push({wch:15})}r.C11.s={alignment:{vertical:"center",horizontal:"center",wrapText:!0}},r.D11.s={alignment:{vertical:"center",horizontal:"center",wrapText:!0}},r.O10.s={alignment:{vertical:"center",horizontal:"center",wrapText:!0}},r.Q10.s={alignment:{vertical:"center",horizontal:"center",wrapText:!0}},l[4]={wch:8},l[5]={wch:8},l[7]={wch:10},r["!cols"]=l,Ge.a.writeFile(t,"PEMS ".concat(s," Report Generated on ").concat(h.format(new Date,"MMM-dd-yyyy"),".xlsx"))}))}({records:ea(t),dates:[a,n],reportType:se,shipName:Te,isDaily:S,carrierName:qe,voyageRoute:Ke,voyageNumber:ve})}catch(e){f(!0),j("Template not found")}m(!1)}else m(!1),j("No Records Found"),f(!0)})).catch((function(e){j("Unable to access records"),f(!0),m(!1)}))}catch(e){j("Code Error"),f(!0),m(!1)}},$e=function(e,t){return g.post("carrier/download",{dates:[e,t],transport:fe,voyage:ve},{headers:{Authorization:"bearer "+a.access_token}})},ea=function(e){var a,t=e.data,n=[],r="",l="",c="";for(var s in t){var o=t[s].profile,i=t[s].companions;if(i.length>0)for(var m in r="",i)r=1===i.length?i[m].name:r+", "+i[m].name;if(o.relatives.length>0)for(var u in l="",c="",o.relatives)1===o.relatives.length?(l=o.relatives[u].name,c=o.relatives[u].contact):(l=l+" "+o.relatives[u].name,c=c+", "+o.relatives[u].contact);a=[o.first_name.toUpperCase(),o.last_name.toUpperCase(),r,t[s].accommodation_type,o.gender.toUpperCase(),o.age,o.address.specific_address,o.address.zipcode,t[s].fromLocation,t[s].toLocation,null!=o.mobile?o.mobile:"",null!=o.email?o.email:"",l,c,"".concat(t[s].temperature)||"",t[s].seat_no,t[s].parking_space_no||"",t[s].previous_place_travel||""],n=[].concat(Object(Le.a)(n),[a])}return n};return Object(n.useEffect)((function(){var e=l.profileDetails;return ze(e.carrier_name),function(){}}),[]),r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,toggle:e.toggle,className:"modal-md mt-5 pt-5"},r.a.createElement(je.a,{toggle:e.toggle},r.a.createElement(R.a,{icon:H.l,className:"text-success mr-1"}),"Passenger Manifest Report"),r.a.createElement("form",{onSubmit:function(e){return Ze(e)}},r.a.createElement(ye.a,null,b&&r.a.createElement(B.a,{md:12,className:"text-left m-0 p-0 ml-3"},r.a.createElement(_e.a,{variant:"h6"},r.a.createElement(ae,{className:"p-0 m-0"},O))),r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{md:12},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12},r.a.createElement(xe.a,{className:"p-2 pl-4",elevation:0},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:{size:"auto"},className:"m-0 p-0"},r.a.createElement(Ie.a,{className:"mt-1 ml-1 p-0",control:r.a.createElement(Re.a,{className:"m-0 p-0 pr-1",checked:S,onChange:function(e){return Qe(e.target.checked,1)},color:"primary",size:"small"}),label:"Daily"})),r.a.createElement(B.a,{md:{size:"auto"},className:"m-0 p-0 text-left"},r.a.createElement(Ie.a,{className:"mt-1 ml-1 p-0",control:r.a.createElement(Re.a,{className:"m-0 p-0 pr-1",checked:k,onChange:function(e){return Qe(e.target.checked,2)},color:"primary",size:"small"}),label:"Monthly"})),r.a.createElement(B.a,{md:{size:"auto"},className:"m-0 p-0"},r.a.createElement(Ie.a,{className:"mt-1 ml-1 p-0",control:r.a.createElement(Re.a,{className:"m-0 p-0 pr-1",checked:P,onChange:function(e){return Qe(e.target.checked,3)},color:"primary",size:"small"}),label:"Custom"})))))))),r.a.createElement(L.a,{className:"mt-1"},r.a.createElement(B.a,{md:12,className:"text-center pt-0"},r.a.createElement(B.a,{md:12,className:"text-left p-2"},r.a.createElement(He,{setShipName:Ee,setShiplabel:De,getShipDetails:function(e){g.get("carrier/transport/ship/".concat(e),{headers:{Authorization:"bearer "+a}}).then((function(e){var a=e.data;null!=a&&Xe(a.routes)}))}}),r.a.createElement(v.a,{value:ve,onChange:function(e){return Ne(e.target.value)},label:"Voyage Number",fullWidth:!0,required:!0})),S&&r.a.createElement(B.a,{md:12,className:"p-2 pt-0 mt-0"},r.a.createElement(Ue.a,{utils:Be.a},r.a.createElement(Fe.a,{name:"daily",value:J,onChange:function(e,a){return K(e)},label:"Select Date",format:"MMM/d/yyyy",required:!0,clearable:!0,hideTabs:!0,showTodayButton:!0,fullWidth:!0}))),k&&r.a.createElement(B.a,{md:12,className:"p-2 pt-0 mt-0"},r.a.createElement(Ue.a,{className:"m-0 p-0",utils:Be.a},r.a.createElement(Fe.a,{name:"monthly",className:"m-0 p-0",variant:"dialog",value:Z,onChange:function(e,a){return $(e)},label:"Select Month",format:"MMMM yyyy",views:["year","month"],openTo:"month",required:!0,clearable:!0,hideTabs:!0,fullWidth:!0}))),P&&r.a.createElement("div",null,r.a.createElement(B.a,{md:12,className:"p-2 pt-0 mt-0"},r.a.createElement(Ue.a,{className:"float-left",utils:Be.a},r.a.createElement(Fe.a,{name:"startDate",value:I,onChange:function(e,a){return function(e){q(t.format(new Date(e),"Y-M-dd")),re(""!==e)}(e)},label:"Start Date",format:"MMM/d/yyyy",required:!0,clearable:!0,hideTabs:!0,showTodayButton:!0,fullWidth:!0})),r.a.createElement(Ue.a,{className:"float-left mt-2",utils:Be.a},r.a.createElement(Fe.a,{name:"endDate",value:F,onChange:function(e,a){return function(e){Y(t.format(new Date(e),"Y-M-dd"))}(e)},label:"End Date",minDate:t.addDays(new Date(I),1),format:"MMM/d/yyyy",disabled:!ne,required:!0,clearable:!0,hideTabs:!0,fullWidth:!0})))))))),r.a.createElement("div",null,i&&r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{className:"text-center"},r.a.createElement(Pe,{title:"Generating Report"}))))),r.a.createElement(Se.a,null,ue&&r.a.createElement(Ce.a,{type:"submit",color:"success",disabled:i,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.i})," Download"),r.a.createElement(Ce.a,{color:"danger",onClick:e.toggle,disabled:i,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.G})," Cancel")))))},Xe=t(796),Qe=t(296),Ze=t(87),$e=t(760),ea=t(763),aa=t(798),ta=t(422),na=t(795),ra=t(454),la=t.n(ra),ca=t(455),sa=t.n(ca),oa=t(456),ia=t.n(oa),ma=t(457),ua=t.n(ma),da=t(303),pa=t.n(da),ba=t(302),fa=t.n(ba),Ea=t(4),ga=(t(516),Object(n.createContext)());function ha(){return Object(n.useContext)(ga)}var va=t(92),Oa=t(417),ja=t(451),ya=t.n(ja),Na=t(794),Sa=(t(748),function(e){return r.a.createElement("div",{className:"p-0 m-0 mt-2 mydatatable"},e.isLoading&&r.a.createElement(Na.a,{style:{marginLeft:"48%",marginTop:"18%",position:"absolute",zIndex:"1000"}}),r.a.createElement(ya.a,{title:e.title,data:e.data,columns:e.columns,options:e.options}))}),Ca=t(6),xa=t(444),wa=t(453),ka=t.n(wa),_a=Object(Ca.a)({paper:{}})((function(e){return r.a.createElement(xa.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Ta=Object(Ca.a)((function(e){return{root:{"&:focus":{"& .MuiListItemIcon-root":{color:"#757575"},"& .MuiListItemText-primary":{color:"#454545"}}}}}))(ue.a);function Da(e){var a=Object(n.useState)(null),t=Object(s.a)(a,2),l=t[0],c=t[1],o=function(){c(null)};return r.a.createElement("div",{className:"mt-1 pt-1 ml-1 float-right"},r.a.createElement(I.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"primary",onClick:function(e){c(e.currentTarget)},className:"p-1 pr-2 pl-2 menuButton"},r.a.createElement(R.a,{icon:H.h,className:"mr-1"})," Options"),r.a.createElement(_a,{id:"customized-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:o},r.a.createElement(Ta,{onClick:function(){return function(a){switch(o(),a){case 1:e.toggle&&e.toggle()}}(1)}},r.a.createElement(aa.a,null,r.a.createElement(ka.a,null)),r.a.createElement(ta.a,{primary:"New Sub Account"}))))}t(749);var Pa=function(e){var a=d().authTokens,t=Object(n.useState)(!1),l=Object(s.a)(t,2),c=l[0],o=l[1],i=Object(n.useState)(!1),m=Object(s.a)(i,2),u=m[0],p=m[1],b=Object(n.useState)("Invalid Input"),f=Object(s.a)(b,2),E=f[0],h=f[1],y=Object(n.useState)(!0),S=Object(s.a)(y,2),x=S[0],w=S[1],k=Object(n.useState)(""),_=Object(s.a)(k,2),T=_[0],D=_[1],P=Object(n.useState)(""),A=Object(s.a)(P,2),M=A[0],W=A[1],I=Object(n.useState)(""),q=Object(s.a)(I,2),U=q[0],F=q[1],Y=Object(n.useState)(""),G=Object(s.a)(Y,2),V=G[0],J=G[1],K=Object(n.useState)(""),X=Object(s.a)(K,2),Q=X[0],Z=X[1],$=Object(n.useState)(!1),ee=Object(s.a)($,2),ae=ee[0],te=ee[1];return r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,toggle:e.toggle,className:"modal-md",style:{marginLeft:"40%",marginTop:"7%",color:"#1a1751"}},r.a.createElement(je.a,{toggle:e.toggle},r.a.createElement(R.a,{icon:H.o})," New Sub Account ",r.a.createElement("br",null)),r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault(),o(!0);var n=a.details;if(!x)return h("Minimum password length is 6"),p(!0),!1;if(x){p(!1);var r={transport_company_id:n.transport_company_id,carrier_name:n.carrier_name,carrier_contact:V,carrier_address:Q,carrier_email:U,username:T,password:M,type:"sub"};g.post("account/register",r).then((function(a){200===a.status?0===a.data.error?oe.a.fire("Transaction Failed",a.data.message,"error"):oe.a.fire("Transaction Completed!","Account Successfully Registered!","success").then((function(){e.toggle(),e.loadSubAccounts()})):254===a.status?oe.a.fire("Transaction Failed",a.data.message,"error"):oe.a.fire("Transaction Failed","Registration Failed","error");o(!1)})).catch((function(e){oe.a.fire("Transaction Completed!","Account Successfully Registered!","success"),o(!1)}))}else oe.a.fire("Transaction Completed!","Account Successfully Registered!","success"),o(!1)}(t)}},r.a.createElement(ye.a,null,u&&r.a.createElement("div",{className:"text-left card p-1 bg-danger"},r.a.createElement("span",{className:"text-white ml-2"},r.a.createElement(R.a,{icon:H.A})," ",E)),r.a.createElement(L.a,{className:"p-2 pt-0"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(L.a,null,r.a.createElement("div",{className:"col-md-12 p-1"},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"p-1 m-1"},r.a.createElement("div",{className:"mt-1 mb-1"},r.a.createElement(v.a,{name:"username",label:"Username",onChange:function(e){return D(e.target.value)},fullWidth:!0,required:!0})),r.a.createElement("div",null,r.a.createElement(v.a,{type:ae?"text":"password",name:"password",label:"Password",onChange:function(e){return a=e.target.value,W(a),p(!1),void(a.replace(/\s+/g,"").length>=6?w(!0):w(!1));var a},error:x,fullWidth:!0,required:!0,InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(j.a,{onClick:function(){return te(!ae)}},ae?r.a.createElement(N.a,null):r.a.createElement(C.a,null)))}})),r.a.createElement("div",null,r.a.createElement(v.a,{name:"email",placeholder:"Email",label:"Email",value:U,onChange:function(e){return F(e.target.value)},fullWidth:!0,required:!0})),r.a.createElement("div",null,r.a.createElement(v.a,{name:"contact",placeholder:"Contact Number",label:"Contact Number",value:V,onChange:function(e){return J(e.target.value)},fullWidth:!0,required:!0})),r.a.createElement("div",null,r.a.createElement(v.a,{name:"address",placeholder:"Address",label:"Address",value:Q,onChange:function(e){return Z(e.target.value)},fullWidth:!0,required:!0}))))))),c&&r.a.createElement(B.a,{md:12},r.a.createElement(xe.a,{className:"p-2 m-2 mt-3"},r.a.createElement(Pe,{title:"Creating new account"}))))),r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{type:"submit",color:"primary",disabled:c||u,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.w})," Save")," ",r.a.createElement(Ce.a,{color:"danger",onClick:e.toggle,disabled:c,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.G})," Close")))))},Aa=function(e){var a=d().authTokens,t=ha(),l=Object(n.useState)(!1),c=Object(s.a)(l,2),o=c[0],i=c[1],m=Object(n.useState)(!1),u=Object(s.a)(m,2),p=u[0],b=u[1],f=Object(n.useState)(!0),E=Object(s.a)(f,2),h=E[0],O=E[1],j=Object(n.useState)(""),y=Object(s.a)(j,2),N=y[0],S=y[1],C=Object(n.useState)(""),x=Object(s.a)(C,2),w=x[0],k=x[1],_=Object(n.useState)(""),T=Object(s.a)(_,2),D=T[0],P=T[1],A=Object(n.useState)(""),M=Object(s.a)(A,2),W=M[0],I=M[1],q=Object(n.useState)(""),U=Object(s.a)(q,2),F=U[0],Y=U[1],G=Object(n.useState)(""),V=Object(s.a)(G,2),J=V[0],K=V[1];return Object(n.useEffect)((function(){var e=t.selectedSubAccounts[0];return S(e.id),k(e.transport_company_id),P(e.carrier_name),I(e.carrier_contact),K(e.carrier_email),Y(e.carrier_address),function(){}}),[]),r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,toggle:e.toggle,className:"modal-md",style:{marginLeft:"40%",marginTop:"7%",color:"#1a1751"}},r.a.createElement(je.a,{toggle:e.toggle},r.a.createElement(R.a,{icon:H.D})," Update Profile ",r.a.createElement("br",null)),r.a.createElement("form",{onSubmit:function(n){return function(n){n.preventDefault(),i(!0);var r={id:N,transport_company_id:w,carrier:D,contact:W,address:F,email:J,type:"sub"};g.post("auth/carrier/update",r,{headers:{Authorization:"bearer "+a.access_token}}).then((function(a){a.data.status?(i(!1),oe.a.fire("Transaction Completed!","Profile Updated!","success"),e.toggle(),t.loadSubAccounts()):(i(!1),oe.a.fire("Transaction Failed!",a.data.message,"error"))})).catch((function(e){i(!1),oe.a.fire("Transaction Failed!","error")}))}(n)}},r.a.createElement(ye.a,null,r.a.createElement(Ie.a,{className:"ml-2",control:r.a.createElement(qe.a,{checked:p,onChange:function(){b(!p),O(!h||null)},color:"primary"}),label:"Edit"}),r.a.createElement("div",{className:"col-md-12"},r.a.createElement(L.a,null,r.a.createElement("div",{className:"col-md-12 p-1"},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"p-1 m-1"},r.a.createElement("div",null,r.a.createElement(v.a,{name:"contact",label:"Contact",value:W||"",onChange:function(e){return I(e.target.value)},fullWidth:!0,required:!0,disabled:h})),r.a.createElement("div",{className:"mt-1 mb-1"},r.a.createElement(v.a,{name:"email",label:"Email",value:J||"",onChange:function(e){return K(e.target.value)},fullWidth:!0,required:!0,disabled:h})),r.a.createElement("div",{className:"mt-1 mb-1"},r.a.createElement(v.a,{name:"address",label:"Address",value:F||"",onChange:function(e){return Y(e.target.value)},fullWidth:!0,required:!0,disabled:h}))))))),r.a.createElement(L.a,{className:"p-2 pt-0"},o&&r.a.createElement(B.a,{md:12},r.a.createElement(xe.a,{className:"p-2 m-2 mt-3"},r.a.createElement(Pe,{title:"Updating User Profile"}))))),r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{type:"submit",color:"primary",disabled:!p||o,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.w})," Save")," ",r.a.createElement(Ce.a,{color:"danger",onClick:e.toggle,disabled:o,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.G})," Close")))))},Ma=function(e){var a=d().authTokens,t=ha(),l=Object(n.useState)(!1),c=Object(s.a)(l,2),o=c[0],i=c[1],m=Object(n.useState)(!1),u=Object(s.a)(m,2),p=u[0],b=u[1],f=Object(n.useState)(!1),E=Object(s.a)(f,2),h=E[0],y=E[1],S=Object(n.useState)("Invalid Password"),x=Object(s.a)(S,2),w=x[0],k=x[1],_=Object(n.useState)(!1),T=Object(s.a)(_,2),D=T[0],P=T[1],A=Object(n.useState)(""),M=Object(s.a)(A,2),W=M[0],I=M[1],q=Object(n.useState)(""),U=Object(s.a)(q,2),F=U[0],Y=U[1];return Object(n.useEffect)((function(){return I(t.selectedSubAccounts[0].id),function(){}}),[]),r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,toggle:e.toggle,className:"modal-md",style:{marginLeft:"40%",marginTop:"7%",color:"#1a1751"}},r.a.createElement(je.a,{toggle:e.toggle},r.a.createElement(R.a,{icon:H.o})," Reset Password ",r.a.createElement("br",null)),r.a.createElement("form",{onSubmit:function(t){return function(t){t.preventDefault();var n=a.access_token;if(D&&k("Minimum password length is 6"),D)y(!0);else{y(!1),i(!0);var r={id:W,new_password:F};g.post("store/update-password",r,{headers:{Authorization:"bearer "+n}}).then((function(a){i(!1),a.data.status?(oe.a.fire("Transaction Completed!","Password Successfully Updated!","success"),e.toggle()):(k(a.data.message),oe.a.fire("Transaction Failed!",a.data.message,"error"))})).catch((function(e){i(!1),oe.a.fire("Transaction Failed!","Failed to Update Password!","error")}))}}(t)}},r.a.createElement(ye.a,null,h&&r.a.createElement("div",{className:"text-left card p-1 bg-danger"},r.a.createElement("span",{className:"text-white ml-2"},r.a.createElement(R.a,{icon:H.A})," ",w)),r.a.createElement(L.a,{className:"p-2 pt-0"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement(L.a,null,r.a.createElement("div",{className:"col-md-12 p-1"},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"p-1 m-1"},r.a.createElement("div",{className:"mt-1 mb-1"},r.a.createElement(v.a,{name:"password",label:"Password",type:p?"text":"password",onChange:function(e){return a=e.target.value,Y(a),void(a.replace(/\s+/g,"").length>=6?P(!1):P(!0));var a},fullWidth:!0,required:!0,InputProps:{endAdornment:r.a.createElement(O.a,{position:"end"},r.a.createElement(j.a,{onClick:function(){return b(!p)}},p?r.a.createElement(N.a,null):r.a.createElement(C.a,null)))}}))))))),o&&r.a.createElement(B.a,{md:12},r.a.createElement(xe.a,{className:"p-2 m-2 mt-3"},r.a.createElement(Pe,{title:"Resetting Password"}))))),r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{type:"submit",color:"primary",disabled:o||h,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.w})," Save")," ",r.a.createElement(Ce.a,{color:"danger",onClick:e.toggle,disabled:o,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.G})," Close")))))},Wa=function(e){var a=d().authTokens,t=Object(n.useState)([]),l=Object(s.a)(t,2),c=l[0],o=l[1],i=Object(n.useState)(""),m=Object(s.a)(i,2),u=m[0],p=m[1],b=Object(n.useState)(),f=Object(s.a)(b,2),h=f[0],v=f[1],O=Object(n.useState)(!1),j=Object(s.a)(O,2),y=j[0],N=j[1],S=Object(n.useState)(!1),C=Object(s.a)(S,2),x=C[0],w=C[1],k=function(){return w(!x)},_=Object(n.useState)(!1),T=Object(s.a)(_,2),D=T[0],P=T[1],A=function(){return P(!D)},M=Object(n.useState)(!1),W=Object(s.a)(M,2),I=W[0],z=W[1],U=function(){return z(!I)},F=function(e,a,t){return r.a.createElement(Ie.a,{className:"ml-2",control:r.a.createElement(qe.a,{checked:!!a.isActive,onChange:function(n){return Y(e,a,t)},color:a.isActive?"primary":"default"}),label:a.isActive?"Active":"Inactive"})},Y=function(e,t,n){var r=n,l="Activate this account?",c="info",s="Activating";t.isActive&&(l="Deactivate this account?",c="warning",s="Deactivating"),oe.a.fire({title:"".concat(s," Account"),text:l,icon:c,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(n){n.isConfirmed&&g.post("carrier/toggle",{id:t.id,isActive:!t.isActive},{headers:{Authorization:"bearer "+a.access_token}}).then((function(a){if(a.data.status){r[e].isActive=!t.isActive;var n=G(r);o(n)}else oe.a.fire("Transaction Completed",a.data.message,"error")}))}))},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?null:V(e)},V=function(e){for(var a=[],t=0,n=0,r=Object.entries(e);n<r.length;n++){var l=Object(s.a)(r[n],2),c=(l[0],l[1]);a[t]=[c.id,c.username,c.carrier_email,c.carrier_contact,F(t,c,e),[c,t,e]],t++}return a},J=Object(n.useCallback)((function(){N(!0);var e=E.a.cancelToken;g.get("carrier/sub-accounts",{cancelToken:e,headers:{Authorization:"bearer "+a.access_token}}).then((function(e){var a=e.data.data,t=e.data.current_page;if(a.length>0){var n=G(a);v(t),o(n)}N(!1)})).catch((function(e){N(!1)}))}),[]),K=Object(va.debounce)((function(e){return X(e)}),500),X=function(e){return g.post("carrier/sub-accounts/search",{account:e},{headers:{Authorization:"bearer "+a.access_token}}).then((function(e){var a=e.data,t=G(a);o(t),N(!1)}))},Q=["ID","Username","Email","Contact","Status",{name:"Options",options:{customBodyRender:function(e,a,t){return r.a.createElement("div",{style:{color:"#1a1751"}},r.a.createElement(Oa.a,{title:"Update Account",placement:"top"},r.a.createElement(Ce.a,{color:"link",className:"p-1 m-0 btn",onClick:function(){return function(e){A(),p(e)}(e)}},r.a.createElement(R.a,{icon:H.j}))),r.a.createElement(Oa.a,{title:"Reset Password",placement:"top"},r.a.createElement(Ce.a,{color:"link",className:"p-1 m-0 btn",onClick:function(){return function(e){U(),p(e)}(e)}},r.a.createElement(R.a,{className:"text-danger",icon:H.v}))))}}}],Z={fixHeader:!0,filterType:"dropdown",responsive:"vertical",tableBodyHeight:"350px",selectableRows:"none",filter:!1,viewColumns:!1,elevation:0,print:!1,download:!1,rowsPerPage:5,rowsPerPageOptions:[5,30,100],onChangePage:function(e){var t;e%2!==0&&e>=h&&(t=h+1,g.get("carrier/sub-accounts?page=".concat(t),{headers:{Authorization:"bearer "+a.access_token}}).then((function(e){var a=e.data.data,t=[],n=G(a);e.data.current_page>h&&(v(e.data.current_page),t=void 0!==n?[].concat(Object(Le.a)(c),Object(Le.a)(n)):c),o(t)})))},onSearchClose:function(){N(!1),J()},searchProps:{onKeyUp:function(e){var a=e.target.value;a.length>=2&&(N(!0),K(a))}},customSearch:function(e,a,t){return c.length>0}};return Object(n.useEffect)((function(){return J(),function(){}}),[J]),r.a.createElement(ga.Provider,{value:{subAccountsData:c,selectedSubAccounts:u,loadSubAccounts:J}},r.a.createElement(q.a,{fluid:"true",className:"p-0 m-0 mt-5"},r.a.createElement(L.a,{className:"m-0 p-0 text-right"},r.a.createElement(B.a,{md:12},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12,className:"m-0 p-0"},r.a.createElement(Da,{toggle:k})))),r.a.createElement(B.a,{md:12,className:"pl-0 ml-0 pr-0 mr-0 text-left"},r.a.createElement(Sa,{title:"Sub Accounts",data:c,isLoading:y,columns:Q,options:Z})))),x&&r.a.createElement(Pa,{isOpen:x,toggle:k,loadSubAccounts:J}),D&&r.a.createElement(Aa,{isOpen:D,toggle:A,loadSubAccounts:J}),I&&r.a.createElement(Ma,{isOpen:I,toggle:U}))},Ia=t(802),qa=t(803),za=t(804),La=t(805),Ba=t(806),Ua=t(801),Fa=function(e){var a=Object(n.useState)(""),t=Object(s.a)(a,2),l=t[0],c=t[1];return r.a.createElement("div",null,r.a.createElement(v.a,{select:!0,label:"Select Schedule",name:"schedule",value:e.selectedSchedule||l,onChange:function(a){return t=a.target.value,c(t),void(e.handleScheduleSelection&&e.handleScheduleSelection(t));var t},fullWidth:!0,required:!0,disabled:!e.disabled||null,className:"text-left mb-1"},e.scheduleOptions.map((function(e){return r.a.createElement(ue.a,{key:e.value,value:e.value},e.label)}))))},Ra=function(e){var a=d().authTokens.access_token,t=We(),l=new Be.a,c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],m=o[1],u=Object(n.useState)(null),p=Object(s.a)(u,2),b=p[0],f=p[1],E=Object(n.useState)(null),h=Object(s.a)(E,2),v=h[0],O=h[1],j=Object(n.useState)(null),y=Object(s.a)(j,2),N=y[0],S=y[1],C=Object(n.useState)(""),x=Object(s.a)(C,2),w=x[0],k=x[1],_=Object(n.useState)(""),T=Object(s.a)(_,2),D=T[0],P=T[1],A=Object(n.useState)(0),M=Object(s.a)(A,2),W=M[0],I=M[1],q=Object(n.useState)(""),U=Object(s.a)(q,2),F=U[0],Y=U[1],G=Object(n.useState)([]),V=Object(s.a)(G,2),J=V[0],K=V[1],X=Object(n.useState)([{value:"",label:""}]),Q=Object(s.a)(X,2),Z=Q[0],$=Q[1],ee=Object(n.useState)(!1),ae=Object(s.a)(ee,2),te=ae[0],ne=ae[1],re=Object(n.useState)(!0),le=Object(s.a)(re,2),ce=le[0],se=le[1],ie=Object(n.useState)(""),me=Object(s.a)(ie,2),ue=me[0],de=me[1];return r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,toggle:e.toggle,className:"modal-lg",style:{marginTop:"7%",marginLeft:"30%"}},r.a.createElement(je.a,{style:{lineHeight:"2"},toggle:e.toggle},r.a.createElement(R.a,{icon:H.l})," Import Passenger Manifest"," "),r.a.createElement("form",{onSubmit:function(n){return function(n){n.preventDefault(),m(!0);var r=a,c=new FormData;c.append("profileFile",b),c.append("departure",l.format(new Date(v),"Y-M-dd H:m:s")),c.append("arrival",l.format(new Date(N),"Y-M-dd H:m:s")),c.append("transport_no",parseInt(w)),c.append("ship_name",D),c.append("transport_type",W),c.append("route",F),c.append("scheduled_transportation_id",ue),g.post("store/import/profiles",c,{headers:{Authorization:"bearer "+r,"Content-Type":"multipart/form-data"}}).then((function(a){a.data.status?(m(!1),f(null),O(null),S(null),k(""),I(""),Y(""),de(""),oe.a.fire("Transaction Completed!","Data Successfully Imported!","success"),t.loadPassengers(),e.toggle()):(m(!1),oe.a.fire("Transaction Failed!",a.data.message,"error"))})).catch((function(e){m(!1),oe.a.fire("Transaction Failed!","Failed to Import Data!","error")}))}(n)},encType:"multipart/form-data",id:"excelFile"},r.a.createElement(ye.a,null,r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{md:12,className:"mt-0 pt-0 mb-2 text-danger"},r.a.createElement("h6",null,r.a.createElement(R.a,{icon:H.n})," Note: Please fill in the required (*) fields and use only the required template")),r.a.createElement(B.a,{md:6,className:"p-2 pl-4"},r.a.createElement("h6",{className:"text-primary ml-1"},r.a.createElement(R.a,{icon:H.a})," Transport Details"),r.a.createElement("div",null,r.a.createElement(He,{setShipName:P,getShipDetails:function(e){g.get("carrier/transport/ship/".concat(e),{headers:{Authorization:"bearer "+a}}).then((function(e){var a=e.data;null!=a&&(Y(a.routes),I(a.transportation_category_id))}))},getShipSchedules:function(t){se(!1),ne(!1),$([]),g.get("carrier/transport/voyage/scheduled-ships/".concat(t),{headers:{Authorization:"bearer "+a}}).then((function(a){if(200===a.status){var t=a.data;if(K(t),t.length>0){var n=t.map((function(e,a){var t=l.format(new Date(e.departure),"MMM/d/yyyy h:mm:ss a");return{value:e.id,label:t}}));$(n),e.setIsPreparingData&&e.setIsPreparingData(!1)}else de(""),$([{value:"",label:""}])}se(!0)})).catch((function(e){console.log(e)}))}}))),r.a.createElement(B.a,{md:6,className:"p-2 pr-4 mt-4"},r.a.createElement("div",{className:"p-0 m-0 mt-1"},ce&&r.a.createElement(Fa,{handleScheduleSelection:function(e){return function(e){var a=J.filter((function(a){return a.id===e}));a.length>0&&(ne(!0),de(e),k(a[0].voyage),S(l.format(new Date(a[0].arrival),"Y-M-dd H:m:s")),O(l.format(new Date(a[0].departure),"Y-M-dd H:m:s")))}(e)},scheduleOptions:Z,selectedSchedule:ue,disabled:!te}),!ce&&r.a.createElement("div",{className:"mb-1"},r.a.createElement(Pe,{title:"Loading Schedules..."})))),r.a.createElement(B.a,{md:12,className:"pt-2 mt-2"},r.a.createElement("h6",null,r.a.createElement("a",{href:Je.a,title:"Download Passenger Manifest Template",download:"Passenger-Manifest-Template.xlsx"},r.a.createElement("span",{style:{fontSize:"1rem"}},r.a.createElement(R.a,{icon:H.k})," Download this template")),r.a.createElement("br",null)),r.a.createElement(z.a,null,r.a.createElement(Ne.a,{className:"p-1 m-0"},r.a.createElement("div",{className:"m-0"},r.a.createElement(Ua.a,{accept:".xlsx,.xls",id:"raised-button-file",type:"file",onChange:function(e){return f(e.target.files[0])},disabled:i,required:!0})))))),r.a.createElement("div",null,i&&r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{className:"text-center"},r.a.createElement(Pe,{title:"Importing Passenger Manifest"}))))),r.a.createElement(Se.a,{style:{justifyContent:"flex-end"}},r.a.createElement(Ce.a,{type:"submit",color:"primary",disabled:i,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.g})," Import")," ",r.a.createElement(Ce.a,{color:"danger",onClick:e.toggle,disabled:i,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.G})," Cancel")))))},Ha=function(e){var a=Object(n.useState)(""),t=Object(s.a)(a,2),l=t[0],c=t[1];return r.a.createElement("div",null,r.a.createElement(v.a,{select:!0,label:"Select Gender",name:"gender",value:e.gender||l,onChange:function(a){return t=a.target.value,e.setGender(t.toUpperCase()),void c(t.toUpperCase());var t},fullWidth:!0,required:!0,disabled:e.disabled},[{value:"M",label:"Male"},{value:"F",label:"Female"}].map((function(e){return r.a.createElement(ue.a,{key:e.value,value:e.value},e.label)}))))},Ya=function(e){var a=d().authTokens.access_token,t=We().selectedProfile,l=We(),c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],m=o[1],u=Object(n.useState)(!1),p=Object(s.a)(u,2),b=p[0],f=p[1],E=Object(n.useState)(!0),h=Object(s.a)(E,2),O=h[0],j=h[1],y=Object(n.useState)(""),N=Object(s.a)(y,2),S=N[0],C=N[1],x=Object(n.useState)(""),w=Object(s.a)(x,2),k=w[0],_=w[1],T=Object(n.useState)(""),D=Object(s.a)(T,2),P=D[0],A=D[1],M=Object(n.useState)(""),W=Object(s.a)(M,2),I=W[0],U=W[1],F=Object(n.useState)(""),Y=Object(s.a)(F,2),G=Y[0],V=Y[1],J=Object(n.useState)(""),K=Object(s.a)(J,2),X=K[0],Q=K[1],Z=Object(n.useState)(""),$=Object(s.a)(Z,2),ee=$[0],ae=$[1],te=Object(n.useState)(""),ne=Object(s.a)(te,2),re=ne[0],le=ne[1],ce=Object(n.useState)(""),se=Object(s.a)(ce,2),ie=se[0],me=se[1],ue=Object(n.useState)(""),de=Object(s.a)(ue,2),pe=de[0],be=de[1],fe=Object(n.useState)(""),Ee=Object(s.a)(fe,2),ge=Ee[0],he=Ee[1],ve=Object(n.useState)(""),Oe=Object(s.a)(ve,2),je=Oe[0],ye=Oe[1],Se=Object(n.useState)(""),xe=Object(s.a)(Se,2),we=xe[0],ke=xe[1];Object(n.useEffect)((function(){var a=t[1].profile;if(C(t),_(a.first_name.toUpperCase()),A(a.last_name.toUpperCase()),U(a.gender),V(a.age),Q(t[1].temperature),ae(a.email),le(a.mobile),a.relatives.length>0&&(me(a.relatives[0].name),be(a.relatives[0].contact)),ye(a.address.specific_address),he(a.address.zipcode),t[1].companions.length>0)if(_e(t[1].companions[0].name))if(null!==t[1].companions[0].name){var n=JSON.parse(t[1].companions[0].name);n=JSON.parse(n[0].name),ke(n[0].name)}else ke("");else{var r=t[1].companions[0].name;ke(r)}return e.setIsPreparingData&&e.setIsPreparingData(!1),function(){}}),[t]);var _e=function(e){try{JSON.parse(e)}catch(a){return!1}return!0};return r.a.createElement(q.a,{fluid:!0,className:"pt-2"},!e.isPreparingData&&r.a.createElement("div",null,r.a.createElement(Ie.a,{className:"ml-2",control:r.a.createElement(qe.a,{checked:b,onChange:function(){f(!b),j(!O||null)},color:"primary"}),label:"Edit"}),r.a.createElement(B.a,{xs:12,className:"mt-3"},r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:4},r.a.createElement("h6",{className:"text-primary"},r.a.createElement(R.a,{icon:H.B})," Personal Details"),r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:12},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"pt-1 mt-3"},r.a.createElement("div",null,r.a.createElement(v.a,{name:"first_name",label:"First Name",value:k,onChange:function(e){return _(e.target.value)},fullWidth:!0,required:!0,disabled:O})),r.a.createElement("div",null,r.a.createElement(v.a,{name:"last_name",label:"Last Name",value:P,onChange:function(e){return A(e.target.value)},fullWidth:!0,required:!0,disabled:O})),r.a.createElement("div",null,r.a.createElement(v.a,{type:"number",name:"age",label:"Age",value:G,onChange:function(e){return V(e.target.value)},fullWidth:!0,required:!0,disabled:O})),r.a.createElement("div",null,r.a.createElement(Ha,{gender:I,disabled:O,setGender:U})),r.a.createElement("div",{className:"mb-4"},r.a.createElement(v.a,{type:"number",inputProps:{min:"20.0",max:"50.0",step:"0.1"},name:"bodyTemperature",label:"Body Temperature",value:X||"",onChange:function(e){return Q(e.target.value)},fullWidth:!0,required:!0,disabled:O}))))))),r.a.createElement(B.a,{xs:4,className:"p-0"},r.a.createElement("h6",{className:"text-primary"},r.a.createElement(R.a,{icon:H.s})," Contact Details"),r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:12},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"pt-1"},r.a.createElement("div",null,r.a.createElement(v.a,{name:"mobile",type:"number",label:"Mobile Number",value:re||"",onChange:function(e){return le(e.target.value)},fullWidth:!0,required:!0,disabled:O})),r.a.createElement("div",null,r.a.createElement(v.a,{type:"email",name:"email",label:"Email Address",value:ee||"",onChange:function(e){return ae(e.target.value)},fullWidth:!0,disabled:O})))))),r.a.createElement("h6",{className:"text-primary mt-2 ml-1"},r.a.createElement(R.a,{icon:H.p})," Address"),r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:12},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"pt-1"},r.a.createElement("div",{className:"mt-2"},r.a.createElement(v.a,{name:"zipcode",label:"Zipcode",value:ge||"",onChange:function(e){return he(e.target.value)},fullWidth:!0,required:!0,disabled:O})),r.a.createElement("div",{className:"mb-2"},r.a.createElement(v.a,{label:"Complete Address",name:"complete_address",value:je,onChange:function(e){return ye(e.target.value)},fullWidth:!0,required:!0,disabled:O}))))))),r.a.createElement(B.a,{xs:4},r.a.createElement("h6",{className:"text-primary"},r.a.createElement(R.a,{icon:H.F})," Companion Details"),r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:12},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"pt-1"},r.a.createElement("div",{className:"mt-2 mb-2"},r.a.createElement(v.a,{label:"Child Companion",name:"childCompanion",value:we,helperText:"Use comma (,) as separator for multiple child",onChange:function(e){return ke(e.target.value)},fullWidth:!0,disabled:O})))))),r.a.createElement("h6",{className:"text-primary mt-3"},r.a.createElement(R.a,{icon:H.r})," Nearest Relative"),r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:12},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"pt-1"},r.a.createElement("div",{className:"mt-2"},r.a.createElement(v.a,{label:"Name",name:"relativeName",value:ie,onChange:function(e){return me(e.target.value)},fullWidth:!0,required:!0,disabled:O})),r.a.createElement("div",{className:"mb-2"},r.a.createElement(v.a,{type:"number",label:"Contact Number",name:"relativeContact",value:pe,onChange:function(e){return be(e.target.value)},fullWidth:!0,required:!0,disabled:O})))))))),!i&&r.a.createElement("div",null,b&&r.a.createElement(L.a,{className:"mt-3 ml-1"},r.a.createElement(Ce.a,{type:"button",onClick:function(){return function(){e.setIsProcessing(!0),m(!0);var n,r=a,c=S[1];n="object"===typeof t[1].vehicle_details?t[1].vehicle_details:JSON.parse(t[1].vehicle_details);var s={first_name:k,last_name:P,gender:I,age:G,email:ee,mobile:re,zipcode:parseInt(ge),specific_address:je,temp:X,temperature:X,barangay:c.profile.address.barangay,person_type:c.profile.person_type,origin:c.fromLocation,destination:c.toLocation,arrival:c.toDate,departure:c.fromDate,transport_type:c.mode_of_travel_id,transport_no:parseInt(n.transport_no),ship_name:n.transport_vehicle,travel_id:c.id,accommodation_type:c.accommodation_type,previous_travel:c.previous_place_travel,parking_space_no:c.parking_space_no,seat_no:c.seat_no,route:c.route,companion_name:we,relative_name:ie,relative_contact:pe,scheduled_transportation_id:c.scheduled_transportation_id};g.put("carrier/update/".concat(c.profile_id),s,{headers:{Authorization:"bearer "+r}}).then((function(a){a.data.status?(e.setIsProcessing(!1),m(!1),oe.a.fire("Transaction Completed!","Data Successfully Updated!","success"),l.loadPassengers(),e.toggle()):(e.setIsProcessing(!1),m(!1),oe.a.fire("Transaction Failed!",a.data.message,"error"))})).catch((function(a){e.setIsProcessing(!1),m(!1),oe.a.fire("Transaction Failed!","error")}))}()},color:"primary",disabled:O,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.w})," Save"))))))},Ga=function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],c=t[1],o=ge().modalMarginXL,i=Object(n.useState)(!0),m=Object(s.a)(i,2),u=m[0],d=m[1];return r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,toggle:e.toggle,className:"modal-xl",style:{marginTop:"6%",marginLeft:o}},r.a.createElement(je.a,{style:{lineHeight:"2"},toggle:e.toggle},r.a.createElement(R.a,{icon:H.C})," Passenger Profile"),r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement(ye.a,{className:"pt-0"},r.a.createElement(L.a,null,r.a.createElement(Ya,{setIsProcessing:c,toggle:e.toggle,isPreparingData:u,setIsPreparingData:d}),u&&r.a.createElement(B.a,{className:"text-center mt-2"},r.a.createElement(Pe,{title:"Preparing Data..."}))),r.a.createElement("div",null,l&&r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{className:"text-center"},r.a.createElement(Pe,{title:"Updating Passenger Profile"}))))))))},Va=function(e){var a=Object(n.useState)(""),t=Object(s.a)(a,2),l=t[0],c=t[1];return r.a.createElement("div",null,r.a.createElement(v.a,{select:!0,label:"Select Accommodation type",name:"accommodationType",value:e.accommodationType||l,onChange:function(a){return t=a.target.value,c(t),void(e.setAccommodationType&&e.setAccommodationType(t));var t},fullWidth:!0,required:!0,disabled:e.disabled},[{value:"1st",label:"1st Class"},{value:"2nd",label:"2nd Class"},{value:"3rd",label:"3rd Class"}].map((function(e){return r.a.createElement(ue.a,{key:e.value,value:e.value},e.label)}))))},Ja=t(117),Ka=t.n(Ja),Xa=function(e){var a=d().authTokens.access_token,t=We().selectedProfile,l=We(),c=new Be.a,o=Object(n.useState)(!1),i=Object(s.a)(o,2),m=i[0],u=i[1],p=Object(n.useState)(!1),b=Object(s.a)(p,2),f=b[0],E=b[1],h=Object(n.useState)("Invalid Input"),O=Object(s.a)(h,2),j=O[0],y=O[1],N=Object(n.useState)(!1),S=Object(s.a)(N,2),C=S[0],x=S[1],w=Object(n.useState)(!0),k=Object(s.a)(w,2),_=k[0],T=k[1],D=Object(n.useState)(""),P=Object(s.a)(D,2),A=P[0],M=P[1],W=Object(n.useState)(""),I=Object(s.a)(W,2),F=I[0],Y=I[1],G=Object(n.useState)(""),V=Object(s.a)(G,2),J=V[0],K=V[1],X=Object(n.useState)(""),Q=Object(s.a)(X,2),Z=Q[0],$=Q[1],ee=Object(n.useState)(""),te=Object(s.a)(ee,2),ne=te[0],re=te[1],le=Object(n.useState)(0),ce=Object(s.a)(le,2),se=ce[0],ie=ce[1],me=Object(n.useState)(""),ue=Object(s.a)(me,2),de=ue[0],pe=ue[1],be=Object(n.useState)(null),fe=Object(s.a)(be,2),Ee=fe[0],ge=fe[1],he=Object(n.useState)(null),ve=Object(s.a)(he,2),Oe=ve[0],je=ve[1],ye=Object(n.useState)(""),Se=Object(s.a)(ye,2),xe=Se[0],we=Se[1],ke=Object(n.useState)(""),Te=Object(s.a)(ke,2),De=Te[0],Ae=Te[1],Me=Object(n.useState)(""),ze=Object(s.a)(Me,2),Le=ze[0],Ue=ze[1],Fe=Object(n.useState)(""),Re=Object(s.a)(Fe,2),Ye=Re[0],Ge=Re[1],Ve=Object(n.useState)([]),Je=Object(s.a)(Ve,2),Ke=Je[0],Xe=Je[1],Qe=Object(n.useState)([]),Ze=Object(s.a)(Qe,2),$e=Ze[0],ea=Ze[1],aa=Object(n.useState)(!0),ta=Object(s.a)(aa,2),na=ta[0],ra=ta[1],la=Object(n.useState)(!0),ca=Object(s.a)(la,2),sa=ca[0],oa=ca[1],ia=Object(n.useState)(t[1].scheduled_transportation_id),ma=Object(s.a)(ia,2),ua=ma[0],da=ma[1];Object(n.useEffect)((function(){var e;return e="object"===typeof t[1].vehicle_details?t[1].vehicle_details:JSON.parse(t[1].vehicle_details),M(t),Y(t[1].fromLocation),K(t[1].toLocation),ge(c.format(new Date(t[1].fromDate),"MMM/d/yyyy h:mm:ss a")),je(c.format(new Date(t[1].toDate),"MMM/d/yyyy h:mm:ss a")),$(t[1].previous_place_travel),re(e.transport_vehicle),ie(t[1].mode_of_travel_id),Ue(parseInt(e.transport_no)),we(t[1].seat_no),Ae(t[1].parking_space_no),Ge(t[1].accommodation_type),pe(t[1].route.toUpperCase()),ba(e.transport_vehicle),function(){}}),[]);var pa=function(n){if(n.preventDefault(),!function(){if(!na)return E(!0),y("Ship schedule is required"),!1;var e=c.date(Ee),a=c.date(Oe),t=c.date(Date.now());return c.isBefore(e,t)?(E(!0),y("Invalid Departure Date"),!1):!c.isBefore(a,e)&&!c.isEqual(e,a)||(E(!0),y("Invalid Arrival Date"),!1)}())return null;e.setIsProcessing(!0),u(!0);var r=a,s="",o=A[1];if(t[1].companions.length>0)if(function(e){try{JSON.parse(e)}catch(n){return!1}return!0}(t[1].companions[0].name))if(null!==t[1].companions[0].name){var i=JSON.parse(t[1].companions[0].name);s=(i=JSON.parse(i[0].name))[0].name}else s="";else s=t[1].companions[0].name;var m={first_name:o.profile.first_name,last_name:o.profile.last_name,gender:o.profile.gender,age:o.profile.age,email:o.profile.email,mobile:o.profile.mobile,zipcode:o.profile.address.zipcode,specific_address:o.profile.address.specific_address,temperature:o.temperature,barangay:o.profile.address.barangay,person_type:o.profile.person_type,origin:F,destination:J,arrival:c.format(new Date(Oe),"Y-M-dd H:m:s"),departure:c.format(new Date(Ee),"Y-M-dd H:m:s"),transport_type:se,transport_no:parseInt(Le),ship_name:ne,travel_id:o.id,accommodation_type:Ye,previous_travel:Z,parking_space_no:De,seat_no:xe,route:de,companion_name:s,relative_name:o.profile.relatives[0].name,relative_contact:o.profile.relatives[0].contact,scheduled_transportation_id:ua};g.put("carrier/update/".concat(o.profile.id),m,{headers:{Authorization:"bearer "+r}}).then((function(a){a.data.status?(e.setIsProcessing(!1),u(!1),oe.a.fire("Transaction Completed!","Data Successfully Updated!","success"),l.loadPassengers(),e.toggle()):(e.setIsProcessing(!1),u(!1),oe.a.fire("Transaction Failed!",a.data.message,"error"))})).catch((function(a){e.setIsProcessing(!1),u(!1),oe.a.fire("Transaction Failed!","error")}))},ba=function(t){oa(!1),ea([]),g.get("carrier/transport/voyage/scheduled-ships/".concat(t),{headers:{Authorization:"bearer "+a}}).then((function(a){if(200===a.status){var t=a.data;if(Xe(t),t.length>0){var n=t.map((function(e,a){var t=c.format(new Date(e.departure),"MMM/d/yyyy h:mm:ss a");return{value:e.id,label:t}}));ea(n),e.setIsPreparingData&&e.setIsPreparingData(!1)}else da(""),ea([{value:"",label:""}])}oa(!0)})).catch((function(e){console.log(e)}))};return r.a.createElement(q.a,{fluid:!0,className:"pt-2"},!e.isPreparingData&&r.a.createElement("div",null,f&&r.a.createElement(B.a,{md:12,className:"text-left m-0 p-0 ml-3"},r.a.createElement(_e.a,{variant:"h6"},r.a.createElement(ae,{className:"p-0 m-0"},j))),r.a.createElement(Ie.a,{className:"ml-2",control:r.a.createElement(qe.a,{checked:C,onChange:function(){x(!C),T(!_||null)},color:"primary"}),label:"Edit"}),r.a.createElement(U.a,{onSubmit:function(e){return pa(e)}},r.a.createElement(B.a,{md:12,className:"mt-3"},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12,className:"text-left mt-0"},r.a.createElement(z.a,{className:"p-0",style:{border:"none"}},r.a.createElement(Ne.a,{className:"m-0 p-0"},r.a.createElement(B.a,{md:12,className:"m-0 p-0"},r.a.createElement(q.a,{fluid:!0},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12},r.a.createElement("h6",{className:"text-primary"},r.a.createElement(Ka.a,null)," Transport Details")),r.a.createElement(B.a,{md:4},r.a.createElement(He,{shipName:ne,setShipName:re,getShipDetails:function(e){g.get("carrier/transport/ship/".concat(e),{headers:{Authorization:"bearer "+a}}).then((function(e){var a=e.data;null!=a&&(pe(a.routes),ie(a.transportation_category_id))}))},getShipSchedules:ba,disabled:_}),r.a.createElement(v.a,{className:"m-0 p-0 mt-1",value:xe,onChange:function(e){return we(e.target.value)},name:"seat_number",label:"Seat/Bunk Number",fullWidth:!0,required:!0,disabled:_}),r.a.createElement(v.a,{hidden:!0,className:"m-0 p-0 mt-1",onChange:function(e){return Ue(e.target.value)},value:Le,name:"transportNumber",label:"Voyage Number",fullWidth:!0,required:!0,disabled:_})),r.a.createElement(B.a,{md:4},r.a.createElement(v.a,{hidden:!0,className:"mb-1",name:"voyageRoute",label:"Voyage Route",value:de,onChange:function(e){return pe(e.target.value.toUpperCase())},fullWidth:!0,disabled:_}),r.a.createElement(v.a,{hidden:!0,className:"mb-1",name:"voyageRoute",label:"Voyage Route",value:de,onChange:function(e){return pe(e.target.value.toUpperCase())},fullWidth:!0,disabled:_}),sa&&r.a.createElement(Fa,{handleScheduleSelection:function(e){return function(e){var a=Ke.filter((function(a){return a.id===e}));a.length>0&&(ra(!0),da(e),Y(a[0].fromLocation),K(a[0].toLocation),Ue(a[0].voyage),je(c.format(new Date(a[0].arrival),"Y-M-dd H:m:s")),ge(c.format(new Date(a[0].departure),"Y-M-dd H:m:s")))}(e)},scheduleOptions:$e,disabled:!_,selectedSchedule:ua}),!sa&&r.a.createElement("div",{className:"mb-1"},r.a.createElement(Pe,{title:"Loading Schedules..."})),r.a.createElement(v.a,{name:"parking_space_no",label:"Parking Space Number",value:De,helperText:"( if with service vehicle )",onChange:function(e){return Ae(e.target.value)},fullWidth:!0,disabled:_})),r.a.createElement(B.a,{md:4},r.a.createElement(Va,{setAccommodationType:Ge,accommodationType:Ye,disabled:_}),r.a.createElement(v.a,{className:"mt-1",label:"Place of Travel History",name:"travelHistory",helperText:"( within 14 Days )",value:Z||"",onChange:function(e){return $(e.target.value)},fullWidth:!0,required:!0,disabled:_}))))))))),!m&&r.a.createElement("div",null,C&&r.a.createElement(L.a,{className:"mt-3 ml-1"},r.a.createElement(Ce.a,{type:"submit",color:"primary",disabled:_,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.w})," Save")))))))},Qa=function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],c=t[1],o=We().selectedProfile,i=ge().modalMarginXL,m=Object(n.useState)(""),u=Object(s.a)(m,2),d=u[0],p=u[1],b=Object(n.useState)(""),f=Object(s.a)(b,2),E=f[0],g=f[1],h=Object(n.useState)(!0),v=Object(s.a)(h,2),O=v[0],j=v[1];return Object(n.useEffect)((function(){p(o[2].first_name),g(o[2].last_name)}),[o]),r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,toggle:e.toggle,className:"modal-xl",style:{marginTop:"8%",marginLeft:i}},r.a.createElement(je.a,{style:{lineHeight:"2"},toggle:e.toggle},r.a.createElement(R.a,{icon:H.C})," Transport Details:"," ",r.a.createElement("span",{className:"text-success"},"".concat(d.toUpperCase()," ").concat(E.toUpperCase()))),r.a.createElement(ye.a,{className:"pt-0"},r.a.createElement(L.a,null,r.a.createElement(Xa,{setIsProcessing:c,toggle:e.toggle,isPreparingData:O,setIsPreparingData:j}),O&&r.a.createElement(B.a,{className:"text-center mt-2"},r.a.createElement(Pe,{title:"Preparing Data..."}))),r.a.createElement("div",null,l&&r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{className:"text-center"},r.a.createElement(Pe,{title:"Updating Transport Details"})))))))},Za=function(e){var a=new Be.a,t=d().authTokens,l=We(),c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=o[0],m=o[1],u=Object(n.useState)(!1),p=Object(s.a)(u,2),b=p[0],f=p[1],E=Object(n.useState)("Invalid Input"),h=Object(s.a)(E,2),O=h[0],j=h[1],y=Object(n.useState)(!1),N=Object(s.a)(y,2),S=N[0],C=N[1],x=Object(n.useState)("1"),w=Object(s.a)(x,2),k=w[0],_=w[1],T=Object(n.useState)([]),D=Object(s.a)(T,2),P=D[0],A=D[1],M=Object(n.useState)([]),W=Object(s.a)(M,2),I=W[0],F=W[1],Y=Object(n.useState)(!1),G=Object(s.a)(Y,2),V=G[0],J=G[1],K=Object(n.useState)(!0),X=Object(s.a)(K,2),Q=X[0],Z=X[1],$=Object(n.useState)(""),ee=Object(s.a)($,2),te=ee[0],ne=ee[1],re=Object(n.useState)(""),le=Object(s.a)(re,2),ce=le[0],se=le[1],ie=Object(n.useState)(""),me=Object(s.a)(ie,2),ue=me[0],de=me[1],pe=Object(n.useState)(""),be=Object(s.a)(pe,2),fe=be[0],Ee=be[1],ge=Object(n.useState)(""),he=Object(s.a)(ge,2),ve=he[0],Oe=he[1],je=Object(n.useState)(""),ye=Object(s.a)(je,2),Se=ye[0],xe=ye[1],we=Object(n.useState)(""),ke=Object(s.a)(we,2),Te=ke[0],De=ke[1],Ae=Object(n.useState)(""),Me=Object(s.a)(Ae,2),Ie=Me[0],qe=Me[1],ze=Object(n.useState)(""),Le=Object(s.a)(ze,2),Ue=Le[0],Fe=Le[1],Re=Object(n.useState)(""),Ye=Object(s.a)(Re,2),Ge=Ye[0],Ve=Ye[1],Je=Object(n.useState)(""),Ke=Object(s.a)(Je,2),Xe=Ke[0],Qe=Ke[1],Ze=Object(n.useState)(""),$e=Object(s.a)(Ze,2),ea=$e[0],aa=$e[1],ta=Object(n.useState)(""),na=Object(s.a)(ta,2),ra=na[0],la=na[1],ca=Object(n.useState)(""),sa=Object(s.a)(ca,2),oa=sa[0],ia=sa[1],ma=Object(n.useState)(""),ua=Object(s.a)(ma,2),da=ua[0],pa=ua[1],ba=Object(n.useState)(""),fa=Object(s.a)(ba,2),Ea=fa[0],ga=fa[1],ha=Object(n.useState)(""),va=Object(s.a)(ha,2),Oa=va[0],ja=va[1],ya=Object(n.useState)(""),Na=Object(s.a)(ya,2),Sa=Na[0],Ca=Na[1],xa=Object(n.useState)(null),wa=Object(s.a)(xa,2),ka=wa[0],_a=wa[1],Ta=Object(n.useState)(null),Da=Object(s.a)(Ta,2),Pa=Da[0],Aa=Da[1],Ma=Object(n.useState)(""),Wa=Object(s.a)(Ma,2),Ia=Wa[0],qa=Wa[1],za=Object(n.useState)(""),La=Object(s.a)(za,2),Ba=La[0],Ua=La[1],Ra=Object(n.useState)(""),Ya=Object(s.a)(Ra,2),Ga=Ya[0],Ja=Ya[1],Xa=Object(n.useState)(""),Qa=Object(s.a)(Xa,2),Za=Qa[0],$a=Qa[1],et=Object(n.useState)(""),at=Object(s.a)(et,2),tt=at[0],nt=at[1],rt=function(e){_(e)},lt=function(n){if(n.preventDefault(),"1"===k)return rt("2"),null;if(!function(){if(!V)return f(!0),j("Ship schedule is required"),!1;var e=a.date(ka),t=a.date(Pa),n=a.date(Date.now());return a.isBefore(e,n)?(f(!0),j("Invalid Departure Date"),!1):!a.isBefore(t,e)&&!a.isEqual(e,t)||(f(!0),j("Invalid Arrival Date"),!1)}())return null;e.setIsProcessing(!0),m(!0);var r={first_name:te,last_name:ce,gender:ue,age:fe,email:Se,mobile:Te,zipcode:parseInt(Ge),specific_address:Xe,temp:ve,barangay:"",origin:ra,destination:oa,arrival:Pa,departure:ka,transport_type:Oa,transport_no:parseInt(Ga),ship_name:Ea,accommodation_type:Za,previous_travel:da,parking_space_no:Ba,seat_no:Ia,route:Sa,companion_name:ea,relative_name:Ie,relative_contact:Ue,scheduled_transportation_id:tt};g.post("carrier/add-profile",r,{headers:{Authorization:"bearer "+t.access_token}}).then((function(a){a.data.status?(e.setIsProcessing(!1),m(!1),oe.a.fire("Transaction Completed!","Data Successfully Created!","success").then((function(){l.loadPassengers(),e.toggle()}))):(e.setIsProcessing(!1),m(!1),oe.a.fire("Transaction Failed!",a.data.message,"error"))})).catch((function(a){e.setIsProcessing(!1),m(!1),oe.a.fire("Transaction Failed!","error")}))};return r.a.createElement(q.a,{fluid:!0,className:"pt-2"},b&&r.a.createElement(B.a,{md:12,className:"text-left m-0 p-0 mt-1 ml-2"},r.a.createElement(_e.a,{variant:"h6"},r.a.createElement(ae,{className:"p-0 m-0"},O))),r.a.createElement(B.a,{xs:12,className:"mt-3"},r.a.createElement(U.a,{onSubmit:function(e){return lt(e)}},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12,className:"mt-0 pt-0 mb-2 text-danger"},r.a.createElement("h6",null,r.a.createElement(R.a,{icon:H.n})," Note: Please fill in the required (*) fields")),"1"===k&&r.a.createElement(q.a,{fluid:!0},r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:4},r.a.createElement("h6",{className:"text-primary"},r.a.createElement(R.a,{icon:H.B})," Personal Details"),r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:12},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"pt-1 mt-3"},r.a.createElement("div",null,r.a.createElement(v.a,{name:"first_name",label:"First Name",value:te,onChange:function(e){return ne(e.target.value)},fullWidth:!0,required:!0})),r.a.createElement("div",null,r.a.createElement(v.a,{name:"last_name",label:"Last Name",value:ce,onChange:function(e){return se(e.target.value)},fullWidth:!0,required:!0})),r.a.createElement("div",null,r.a.createElement(v.a,{type:"number",name:"age",label:"Age",value:fe,onChange:function(e){return Ee(e.target.value)},fullWidth:!0,required:!0})),r.a.createElement("div",null,r.a.createElement(Ha,{gender:ue,setGender:de})),r.a.createElement("div",{className:"mb-4"},r.a.createElement(v.a,{type:"number",inputProps:{min:"20.0",max:"50.0",step:"0.1"},name:"bodyTemperature",label:"Body Temperature",value:ve||"",onChange:function(e){return Oe(e.target.value)},fullWidth:!0}))))))),r.a.createElement(B.a,{xs:4,className:"p-0"},r.a.createElement("h6",{className:"text-primary"},r.a.createElement(R.a,{icon:H.s})," Contact Details"),r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:12},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"pt-1"},r.a.createElement("div",null,r.a.createElement(v.a,{name:"mobile",type:"number",label:"Mobile Number",value:Te||"",onChange:function(e){return De(e.target.value)},fullWidth:!0,required:!0})),r.a.createElement("div",null,r.a.createElement(v.a,{type:"email",name:"email",label:"Email Address",value:Se,onChange:function(e){return xe(e.target.value)},fullWidth:!0})))))),r.a.createElement("h6",{className:"text-primary mt-2 ml-1"},r.a.createElement(R.a,{icon:H.p})," Address"),r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:12},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"pt-1"},r.a.createElement("div",{className:"mt-2"},r.a.createElement(v.a,{type:"number",name:"zipcode",label:"Zipcode",value:Ge,onChange:function(e){return Ve(e.target.value)},fullWidth:!0,required:!0})),r.a.createElement("div",{className:"mb-2"},r.a.createElement(v.a,{label:"Complete Address",name:"complete_address",value:Xe,onChange:function(e){return Qe(e.target.value)},fullWidth:!0,required:!0}))))))),r.a.createElement(B.a,{xs:4},r.a.createElement("h6",{className:"text-primary"},r.a.createElement(R.a,{icon:H.F})," Companion Details"),r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:12},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"pt-1"},r.a.createElement("div",{className:"mt-2 mb-2"},r.a.createElement(v.a,{label:"Child Companion",name:"childCompanion",value:ea,helperText:"Use comma (,) as separator for multiple child",onChange:function(e){return aa(e.target.value)},fullWidth:!0})))))),r.a.createElement("h6",{className:"text-primary mt-3"},r.a.createElement(R.a,{icon:H.r})," Nearest Relative"),r.a.createElement(L.a,null,r.a.createElement(B.a,{xs:12},r.a.createElement(z.a,{className:"p-1"},r.a.createElement(Ne.a,{className:"pt-1"},r.a.createElement("div",{className:"mt-2"},r.a.createElement(v.a,{label:"Name",name:"relativeName",value:Ie,onChange:function(e){return qe(e.target.value)},fullWidth:!0,required:!0})),r.a.createElement("div",{className:"mb-2"},r.a.createElement(v.a,{type:"number",label:"Contact Number",name:"relativeContact",value:Ue,onChange:function(e){return Fe(e.target.value)},fullWidth:!0,required:!0}))))))))),"2"===k&&r.a.createElement(q.a,{fluid:!0},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12},r.a.createElement("h6",{className:"text-primary"},r.a.createElement(Ka.a,null)," Transport Details")),r.a.createElement(B.a,{md:4},r.a.createElement(He,{shipName:Ea,setShipName:ga,getShipDetails:function(e){g.get("carrier/transport/ship/".concat(e),{headers:{Authorization:"bearer "+t}}).then((function(e){var a=e.data;null!=a&&(Ca(a.routes),ja(a.transportation_category_id))}))},getShipSchedules:function(e){Z(!1),F([]),g.get("carrier/transport/voyage/scheduled-ships/".concat(e),{headers:{Authorization:"bearer "+t}}).then((function(e){if(200===e.status){var t=e.data;if(A(t),t.length>0){var n=t.map((function(e,t){var n=a.format(new Date(e.departure),"MMM/d/yyyy h:mm:ss a");return{value:e.id,label:n}}));n.length>0&&J(!0),F(n),C(!0)}Z(!0)}}))}}),r.a.createElement(v.a,{className:"m-0 p-0 mt-1",value:Ia,onChange:function(e){return qa(e.target.value)},name:"seat_number",label:"Seat/Bunk Number",fullWidth:!0,required:!0}),r.a.createElement(v.a,{hidden:!0,className:"m-0 p-0 mt-1",onChange:function(e){return Ja(e.target.value)},value:Ga,name:"transportNumber",label:"Voyage Number",fullWidth:!0,required:!0})),r.a.createElement(B.a,{md:4},r.a.createElement(v.a,{hidden:!0,className:"mb-1",name:"voyageRoute",label:"Voyage Route",value:Sa,onChange:function(e){return Ca(e.target.value.toUpperCase())},fullWidth:!0,disabled:!0}),Q&&r.a.createElement(Fa,{handleScheduleSelection:function(e){return function(e){var t=P.filter((function(a){return a.id===e}));nt(e),la(t[0].fromLocation),ia(t[0].toLocation),Ja(t[0].voyage),Aa(a.format(new Date(t[0].arrival),"Y-M-dd H:m:s")),_a(a.format(new Date(t[0].departure),"Y-M-dd H:m:s"))}(e)},scheduleOptions:I,disabled:S}),!Q&&r.a.createElement("div",{className:"mb-1"},r.a.createElement(Pe,{title:"Loading Schedules..."})),r.a.createElement(v.a,{name:"parking_space_no",label:"Parking Space Number",value:Ba,helperText:"( if with service vehicle )",onChange:function(e){return Ua(e.target.value)},fullWidth:!0})),r.a.createElement(B.a,{md:4},r.a.createElement(Va,{setAccommodationType:$a,accommodationType:Za}),r.a.createElement(v.a,{className:"mt-1",label:"Place of Travel History",name:"travelHistory",helperText:"( within 14 Days )",value:da||"",onChange:function(e){return pa(e.target.value)},fullWidth:!0,required:!0}))))),"1"===k&&r.a.createElement(L.a,{className:"mt-3 mr-1 text-right d-flex"},r.a.createElement(Ce.a,{className:"ml-auto",type:"submit",color:"primary",style:{minWidth:"120px"}},"Next"," ",r.a.createElement(R.a,{icon:H.e,className:"mt-1 ml-1"}))),"2"===k&&r.a.createElement("div",null,!i&&r.a.createElement(L.a,{className:"mt-3 mr-1 text-right d-flex"},r.a.createElement(Ce.a,{className:"ml-auto mr-1",type:"button",onClick:function(){return rt("1")},color:"primary",style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.d,className:"mt-1 ml-1"})," ","Back"),r.a.createElement(Ce.a,{type:"submit",color:"primary",style:{minWidth:"120px"}},"Save ",r.a.createElement(R.a,{icon:H.w,className:"mt-1 ml-1"})))))))},$a=function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),l=t[0],c=t[1],o=ge().modalMarginXL;return r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,toggle:e.toggle,className:"modal-xl",style:{marginTop:"6%",marginLeft:o}},r.a.createElement(je.a,{style:{lineHeight:"2"},toggle:e.toggle},r.a.createElement(R.a,{icon:H.E})," Passenger Profile"),r.a.createElement(ye.a,{className:"pt-0"},r.a.createElement(L.a,null,r.a.createElement(Za,{setIsProcessing:c,toggle:e.toggle})),r.a.createElement("div",null,l&&r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{className:"text-center"},r.a.createElement(Pe,{title:"Create New Passenger Profile"})))))))},et=Object(Ca.a)({paper:{}})((function(e){return r.a.createElement(xa.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),at=Object(Ca.a)((function(e){return{root:{root:{"&:focus":{"& .MuiListItemIcon-root":{color:"#757575"},"& .MuiListItemText-primary":{color:"#454545"}}}}}}))(ue.a);function tt(e){var a=Object(n.useState)(null),t=Object(s.a)(a,2),l=t[0],c=t[1],o=function(){c(null)},i=function(a){var t=1,n=2;switch(o(),a){case t:e.toggleNewManifestModal&&e.toggleNewManifestModal();break;case n:e.toggleNewPassengerModal&&e.toggleNewPassengerModal()}};return r.a.createElement("div",{className:"mt-1 pt-1 ml-1 float-right"},r.a.createElement(I.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"primary",onClick:function(e){c(e.currentTarget)},className:"p-1 pr-2 pl-2 menuButton"},r.a.createElement(R.a,{icon:H.h,className:"mr-1"})," Options"),r.a.createElement(et,{id:"customized-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:o},r.a.createElement(at,{onClick:function(){return i(1)}},r.a.createElement(aa.a,null,r.a.createElement(R.a,{icon:H.m})),r.a.createElement(ta.a,{primary:"Import Manifest"})),r.a.createElement(at,{onClick:function(){return i(2)}},r.a.createElement(aa.a,null,r.a.createElement(R.a,{icon:H.E})),r.a.createElement(ta.a,{primary:"New Passenger"}))))}var nt=function(e){var a=d().authTokens,t=new Be.a,l=Object(n.useState)([]),c=Object(s.a)(l,2),o=c[0],i=c[1],m=Object(n.useState)(),u=Object(s.a)(m,2),p=u[0],b=u[1],f=Object(n.useState)({}),h=Object(s.a)(f,2),v=h[0],O=h[1],j=Object(n.useState)(!1),y=Object(s.a)(j,2),N=y[0],S=y[1],C=Object(n.useState)(!1),x=Object(s.a)(C,2),w=x[0],k=x[1],_=function(){return k(!w)},T=Object(n.useState)(!1),D=Object(s.a)(T,2),P=D[0],A=D[1],M=function(){return A(!P)},W=Object(n.useState)(!1),I=Object(s.a)(W,2),z=I[0],U=I[1],F=function(){return U(!z)},Y=Object(n.useState)(!1),G=Object(s.a)(Y,2),V=G[0],J=G[1],K=function(){return J(!V)},X=Object(n.useState)(!1),Q=Object(s.a)(X,2),Z=Q[0],$=Q[1],ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?null:Object(va.isArray)(e)?ne(e):te(e)},ae=function(e,a,t){return r.a.createElement(Ie.a,{className:"ml-2",control:r.a.createElement(qe.a,{checked:"on board"===a.status.toLowerCase(),onChange:function(n){return se(e,a,t)},color:"on board"===a.status.toLowerCase()?"primary":"default"}),label:a.status.toUpperCase()})},te=function(e){for(var a=[],t=0,n=0,r=Object.entries(e);n<r.length;n++){var l=Object(s.a)(r[n],2),c=(l[0],void 0),o=l[1];c=o.profile,a[t]=[c.id,"".concat(c.first_name.toUpperCase()," ").concat(c.last_name.toUpperCase()),c.age,"F"===c.gender.toUpperCase()?"FEMALE":"MALE",c.email,null===c.mobile?"N/A":c.mobile,o.status,[t,o,c,e]],t++}return a},ne=function(e){if(e.length>0){return e.map((function(a,t){var n,r=a;return n=r.profile,[n.id,"".concat(n.first_name.toUpperCase()," ").concat(n.last_name.toUpperCase()),n.age,"F"===n.gender.toUpperCase()?"FEMALE":"MALE",n.email,null===n.mobile?"N/A":n.mobile,ae(t,r,e),[t,r,n,e]]}))}},re=Object(n.useCallback)((function(){S(!0);var e=E.a.cancelToken,n=Date.now(),r=t.format(new Date(n),"Y-M-dd 00:00:00"),l=t.format(new Date(n),"Y-M-dd 23:59:59");g.post("carrier/trace-profiles",{dates:[r,l]},{cancelToken:e,headers:{Authorization:"bearer "+a.access_token}}).then((function(e){var a=e.data.data,t=e.data.current_page;if(Object.keys(a).length>0){var n=ee(a);b(t),i(n)}S(!1)})).catch((function(e){S(!1)}))}),[]),le=Object(va.debounce)((function(e){return ce(e)}),500),ce=function(e){return g.post("carrier/search",{_text:e},{headers:{Authorization:"bearer "+a.access_token}}).then((function(e){var a=e.data,t=ee(a);i(t),S(!1)}))},se=function(e,t,n){var r=n,l="On board passenger?",c="info",s="On boarding",o="On board";"on board"===t.status.toLowerCase()&&(l="Move to pre-board this passenger?",c="warning",s="Pre-boarding",o="Pre-board"),oe.a.fire({title:"".concat(s," Passenger"),text:l,icon:c,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(n){n.isConfirmed&&g.post("carrier/transport/voyage/update-status",{data:[{id:t.id,status:o.toLowerCase()}]},{headers:{Authorization:"bearer "+a.access_token}}).then((function(a){if(a.data.status){r[e].status=o.toUpperCase();var t=ee(r);i(t)}else oe.a.fire("Transaction Completed",a.data.message,"error")}))}))},ie=["Ref #","Name","Age","Gender","Email","Contact","Status",{name:"Actions",options:{customBodyRender:function(e,t,n){return r.a.createElement("div",{style:{color:"#1a1751"}},r.a.createElement(Oa.a,{title:"Profile Details",placement:"top"},r.a.createElement(Ce.a,{color:"link",className:"p-1 m-0 btn",onClick:function(){return O(e),void F()}},r.a.createElement(R.a,{icon:H.B}))),r.a.createElement(Oa.a,{title:"Transport Details",placement:"top"},r.a.createElement(Ce.a,{color:"link",className:"p-1 m-0 btn text-primary",onClick:function(){return O(e),void K()}},r.a.createElement(Ka.a,{fontSize:"small"}))),r.a.createElement(Oa.a,{title:"Archive Passenger Data",placement:"top"},r.a.createElement(Ce.a,{color:"link",className:"p-1 m-0 btn text-danger",onClick:function(){return function(e){var t=e[3];oe.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(n){n.isConfirmed&&g.delete("carrier/delete/".concat(e[1].id),{headers:{Authorization:"bearer "+a.access_token}}).then((function(a){if(a.data.status){oe.a.fire("Transaction Completed",a.data.message,"success"),t.splice(e[0],1);var n=ee(t);i(n)}else oe.a.fire("Transaction Completed",a.data.message,"error")}))}))}(e)}},r.a.createElement(R.a,{icon:H.b}))))}}}],me={fixHeader:!0,filterType:"dropdown",responsive:"vertical",tableBodyHeight:"350px",selectableRows:"none",viewColumns:!1,filter:!1,elevation:0,print:!1,download:!1,rowsPerPage:10,rowsPerPageOptions:[10,30,100],onChangePage:function(e){var t;e%2!==0&&e>=p&&(t=p+1,g.get("carrier/trace-profiles?page=".concat(t),{headers:{Authorization:"bearer "+a.access_token}}).then((function(e){var a=e.data.data,t=[],n=ee(a);e.data.current_page>p&&(b(e.data.current_page),t=void 0!==n?[].concat(Object(Le.a)(o),Object(Le.a)(n)):o),i(t)})))},onSearchClose:function(){S(!1),re()},searchProps:{onKeyUp:function(e){var a=e.target.value;a.length>=2&&(S(!0),le(a))}},customSearch:function(e,a,t){return o.length>0}};return Object(n.useEffect)((function(){return re(),function(){}}),[re]),r.a.createElement(Me.Provider,{value:{passengerData:o,loadPassengers:re,selectedProfile:v}},r.a.createElement(q.a,{fluid:"true",className:"p-0 m-0 "},r.a.createElement(L.a,{className:"m-0 p-0 text-right"},r.a.createElement(B.a,{md:12},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12,className:"m-0 p-0"},r.a.createElement(tt,{toggleNewManifestModal:_,toggleNewPassengerModal:M,toggleNewShip:function(){return $(!Z)}})))),r.a.createElement(B.a,{md:12,className:"pl-0 ml-0 pr-0 mr-0 text-left"},r.a.createElement(Sa,{title:"Passengers",loadPassengers:re,data:o,isLoading:N,columns:ie,options:me})))),w&&r.a.createElement(Ra,{isOpen:w,loadPassengers:re,toggle:_}),z&&r.a.createElement(Ga,{isOpen:z,toggle:F}),V&&r.a.createElement(Qa,{isOpen:V,toggle:K}),P&&r.a.createElement($a,{isOpen:P,toggle:M,loadPassengers:re}))},rt=Object(n.createContext)();function lt(){return Object(n.useContext)(rt)}var ct=Object(n.createContext)();function st(){return Object(n.useContext)(ct)}var ot=Object(Ca.a)({paper:{}})((function(e){return r.a.createElement(xa.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),it=Object(Ca.a)((function(e){return{root:{"&:focus":{"& .MuiListItemIcon-root":{color:"#757575"},"& .MuiListItemText-primary":{color:"#454545"}}}}}))(ue.a);function mt(e){var a=Object(n.useState)(null),t=Object(s.a)(a,2),l=t[0],c=t[1],o=function(){c(null)};return r.a.createElement("div",{className:"mt-1 pt-1 ml-1 float-right"},r.a.createElement(I.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"primary",onClick:function(e){c(e.currentTarget)},className:"p-1 pr-2 pl-2 menuButton"},r.a.createElement(R.a,{icon:H.h,className:"mr-1"})," Options"),r.a.createElement(ot,{id:"customized-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:o},r.a.createElement(it,{onClick:function(){return function(a){switch(o(),a){case 1:e.toggle&&e.toggle()}}(1)}},r.a.createElement(aa.a,null,r.a.createElement(R.a,{icon:H.f})),r.a.createElement(ta.a,{primary:"New Schedule"}))))}var ut=t(810),dt=function(e){return r.a.createElement("div",null,r.a.createElement(Ue.a,{utils:Be.a},r.a.createElement(ut.a,{value:e.arrivalDate,onChange:e.setArrivalDateChange||null,minDate:e.departure,label:"ETA (Est. Time of Arrival)",format:"MMM/d/yyyy h:mm:ss a",required:!0,disablePast:!0,clearable:!0,hideTabs:!0,showTodayButton:!0,fullWidth:!0,helperText:"",error:!1,disabled:!e.isSelectedDeparture})))},pt=function(e){var a=Object(n.useState)(null),t=Object(s.a)(a,2),l=t[0],c=t[1];return r.a.createElement("div",null,r.a.createElement(Ue.a,{utils:Be.a},r.a.createElement(ut.a,{value:l||e.departureDate,onChange:function(a,t){return c(n=a),e.setDepartureDateChange&&e.setDepartureDateChange(n),void(e.pickedDate&&e.pickedDate(n));var n},name:"departureDate",label:"ETD (Est. Time of Departure)",format:"MMM/d/yyyy h:mm:ss a",required:!0,disablePast:!0,clearable:!0,hideTabs:!0,showTodayButton:!0,fullWidth:!0,helperText:"",error:!1,disabled:e.disabled})))},bt=function(e){var a=new Be.a,t=d().authTokens.access_token,l=lt(),c=ge().modalMarginLG,o=Object(n.useState)(!1),i=Object(s.a)(o,2),m=i[0],u=i[1],p=Object(n.useState)(!1),b=Object(s.a)(p,2),f=b[0],E=b[1],h=Object(n.useState)("Invalid Input"),O=Object(s.a)(h,2),j=O[0],y=O[1],N=Object(n.useState)(!1),S=Object(s.a)(N,2),C=S[0],x=S[1],w=Object(n.useState)(null),k=Object(s.a)(w,2),_=k[0],T=k[1],D=Object(n.useState)(0),P=Object(s.a)(D,2),A=P[0],M=P[1],W=Object(n.useState)(null),I=Object(s.a)(W,2),q=I[0],U=I[1],F=Object(n.useState)(null),Y=Object(s.a)(F,2),G=Y[0],V=Y[1],J=Object(n.useState)(""),K=Object(s.a)(J,2),X=K[0],Q=K[1],Z=Object(n.useState)(""),$=Object(s.a)(Z,2),ee=$[0],te=$[1],ne=function(n){if(n.preventDefault(),!function(){var e=a.date(q),t=a.date(G);return a.isAfter(e,t)||a.isEqual(e,t)?(E(!0),y("Invalid Departure Date"),!1):!a.isBefore(t,e)&&!a.isEqual(e,t)||(E(!0),y("Invalid Arrival Date"),!1)}())return null;u(!0);var r=t,c={transportation_id:_,voyage:A,departure:a.format(new Date(q),"Y-M-dd H:m:s"),arrival:a.format(new Date(G),"Y-M-dd H:m:s"),fromLocation:X,toLocation:ee};g.post("carrier/transport/voyage/store",c,{headers:{Authorization:"bearer "+r}}).then((function(a){a.data.status?(u(!1),oe.a.fire("Transaction Completed!","Data Successfully Created!","success"),l.loadSchedules(),e.toggle()):(u(!1),oe.a.fire("Transaction Failed!",a.data.message,"error"))})).catch((function(e){u(!1),oe.a.fire("Transaction Failed!","error")}))};return r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,className:"modal-lg",style:{marginTop:"5%",marginLeft:c}},r.a.createElement(je.a,{toggle:e.toggle},r.a.createElement(R.a,{icon:H.f})," New Schedule"),r.a.createElement("form",{onSubmit:function(e){return ne(e)}},r.a.createElement(ye.a,null,f&&r.a.createElement(B.a,{md:12,className:"text-left m-0 p-0 ml-1"},r.a.createElement(_e.a,{variant:"h6"},r.a.createElement(ae,{className:"p-0 m-0"},j))),r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{md:12},r.a.createElement(z.a,null,r.a.createElement(Ne.a,null,r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12,className:"mt-0 pt-0 mb-2 text-danger"},r.a.createElement("h6",null,r.a.createElement(R.a,{icon:H.n})," Note: Please fill in the required (*) fields"))),r.a.createElement(L.a,null,r.a.createElement(B.a,{md:6},r.a.createElement(He,{setShipName:T}),r.a.createElement(v.a,{className:"m-0",onChange:function(e){return Q(e.target.value)},name:"fromLocation",label:"Origin",required:!0,fullWidth:!0}),r.a.createElement(v.a,{className:"m-0",onChange:function(e){return te(e.target.value)},name:"toLocation",label:"Destination",required:!0,fullWidth:!0})),r.a.createElement(B.a,{md:6},r.a.createElement(v.a,{className:"m-0",onChange:function(e){return M(e.target.value)},name:"voyage",label:"Voyage Number",required:!0,fullWidth:!0}),r.a.createElement(pt,{pickedDate:function(){x(!0)},departureDate:q,setDepartureDateChange:U}),r.a.createElement(dt,{isSelectedDeparture:C,departure:q,arrivalDate:G,setArrivalDateChange:V}))))))),r.a.createElement("div",null,m&&r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{className:"text-center"},r.a.createElement(Pe,{title:"Creating New Voyage Schedule"}))))),r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{type:"submit",color:"primary",disabled:m,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.w})," Save")," ",r.a.createElement(Ce.a,{type:"button",color:"danger",onClick:e.toggle,disabled:m,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.G})," Cancel")))))},ft=function(e){var a=new Be.a,t=d().authTokens.access_token,l=lt(),c=l.selectedSchedule[1],o=ge().modalMarginLG,i=Object(n.useState)(!1),m=Object(s.a)(i,2),u=m[0],p=m[1],b=Object(n.useState)(!1),f=Object(s.a)(b,2),E=f[0],h=f[1],O=Object(n.useState)(!1),j=Object(s.a)(O,2),y=j[0],N=j[1],S=Object(n.useState)(!0),C=Object(s.a)(S,2),x=C[0],w=C[1],k=Object(n.useState)("Invalid Input"),_=Object(s.a)(k,2),T=_[0],D=_[1],P=Object(n.useState)(!1),A=Object(s.a)(P,2),M=A[0],W=A[1],I=Object(n.useState)(!1),q=Object(s.a)(I,2),U=q[0],F=q[1],Y=Object(n.useState)(c.ship.id),G=Object(s.a)(Y,2),V=G[0],J=G[1],K=Object(n.useState)(c.ship.id),X=Object(s.a)(K,2),Q=X[0],Z=X[1],$=Object(n.useState)(c.voyage),ee=Object(s.a)($,2),te=ee[0],ne=ee[1],re=Object(n.useState)(a.format(new Date(c.departure),"MMM/d/yyyy h:mm:ss a")),le=Object(s.a)(re,2),ce=le[0],se=le[1],ie=Object(n.useState)(a.format(new Date(c.departure),"MMM/d/yyyy h:mm:ss a")),me=Object(s.a)(ie,2),ue=me[0],de=me[1],pe=Object(n.useState)(a.format(new Date(c.arrival),"MMM/d/yyyy h:mm:ss a")),be=Object(s.a)(pe,2),fe=be[0],Ee=be[1],he=Object(n.useState)(c.fromLocation),ve=Object(s.a)(he,2),we=ve[0],ke=ve[1],Te=Object(n.useState)(c.toLocation),De=Object(s.a)(Te,2),Ae=De[0],Me=De[1],We=Object(n.useState)(""),ze=Object(s.a)(We,2),Le=ze[0],Ue=ze[1],Fe=Object(n.useState)(!1),Ye=Object(s.a)(Fe,2),Ge=Ye[0],Ve=Ye[1],Je=function(n){if(n.preventDefault(),!function(){var e=a.date(ce),t=a.date(fe);return Ge&&(a.isAfter(e,t)||a.isEqual(e,t))?(h(!0),D("Invalid Departure Date"),!1):!a.isBefore(t,e)&&!a.isEqual(e,t)||(h(!0),D("Invalid Arrival Date"),!1)}())return null;p(!0);var r=t,s={transportation_id:Q,voyage:te,departure:a.format(new Date(ce),"Y-M-dd H:m:s"),arrival:a.format(new Date(fe),"Y-M-dd H:m:s"),fromLocation:we,toLocation:Ae,remarks:Le,notify:U};g.put("carrier/transport/voyage/update/".concat(c.id),s,{headers:{Authorization:"bearer "+r}}).then((function(a){a.data.status?(p(!1),oe.a.fire("Transaction Completed!","Data Successfully Created!","success"),F(!1),de(""),J(""),l.loadSchedules(),e.toggle()):(p(!1),oe.a.fire("Transaction Failed!",a.data.message,"error"))})).catch((function(e){p(!1),oe.a.fire("Transaction Failed!","error")}))};return r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,className:"modal-lg",style:{marginTop:"5%",marginLeft:o}},r.a.createElement(je.a,{toggle:e.toggle},r.a.createElement(R.a,{icon:H.f})," Update Schedule"),r.a.createElement("form",{onSubmit:function(e){return Je(e)}},r.a.createElement(ye.a,{className:"pt-0 pb-0"},E&&r.a.createElement(B.a,{md:12,className:"text-left m-0 p-0 mt-2 ml-2"},r.a.createElement(_e.a,{variant:"h6"},r.a.createElement(ae,{className:"p-0 m-0"},T))),r.a.createElement(L.a,{className:"p-2"},r.a.createElement(Ie.a,{className:"ml-2",control:r.a.createElement(qe.a,{checked:y,onChange:function(){N(!y),w(!x||null)},color:"primary"}),label:"Edit"}),r.a.createElement(B.a,{md:12},r.a.createElement(z.a,null,r.a.createElement(Ne.a,{className:"pb-0"},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12,className:"mt-0 pt-0 mb-2 text-danger"},r.a.createElement("h6",null,r.a.createElement(R.a,{icon:H.n})," Note: Please fill in the required (*) fields"))),r.a.createElement(L.a,null,r.a.createElement(B.a,{md:6},r.a.createElement(He,{disabled:x,shipName:Q,setShipName:Z,handleChangeShip:function(e){return function(e){e!==V&&F(!0)}(e)}}),r.a.createElement(v.a,{className:"m-0",value:we||"",onChange:function(e){return ke(e.target.value)},name:"fromLocation",label:"Origin",required:!0,fullWidth:!0,disabled:x}),r.a.createElement(v.a,{className:"m-0",value:Ae||"",onChange:function(e){return Me(e.target.value)},name:"toLocation",label:"Destination",required:!0,fullWidth:!0,disabled:x})),r.a.createElement(B.a,{md:6},r.a.createElement(v.a,{className:"m-0",value:te,onChange:function(e){return ne(e.target.value)},name:"voyage",label:"Voyage Number",required:!0,fullWidth:!0,disabled:x}),r.a.createElement(pt,{pickedDate:function(e){return function(e){var t=a.date(ue),n=a.date(e);a.isEqual(t,n)||(Ve(!0),F(!0)),W(!0)}(e)},departureDate:ce,setDepartureDateChange:se,disabled:x}),r.a.createElement(dt,{isSelectedDeparture:M,departure:ce,arrivalDate:fe,setArrivalDateChange:Ee,disabled:x}))),r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12},r.a.createElement(xe.a,{className:"mt-3 p-2"},r.a.createElement(_e.a,null,"Remarks/Reason: "),r.a.createElement(v.a,{className:"m-0",value:Le||"",onChange:function(e){return Ue(e.target.value)},name:"remarks",placeholder:"Enter remarks or reasons for update...",fullWidth:!0,multiline:!0,rows:1,rowsMax:1,required:!0,disabled:x,InputProps:{disableUnderline:!0}}))),r.a.createElement(B.a,{md:12},r.a.createElement(Ie.a,{className:"mt-1",control:r.a.createElement(Re.a,{onClick:function(){F(!U)},checked:U,color:"primary"}),label:"Notify Passengers"}))))))),r.a.createElement("div",null,u&&r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{className:"text-center"},r.a.createElement(Pe,{title:"Updating Voyage Schedule"}))))),r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{type:"submit",color:"primary",disabled:u||!y,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.w})," Save")," ",r.a.createElement(Ce.a,{type:"button",color:"danger",onClick:e.toggle,disabled:u,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.G})," Cancel")))))},Et=function(e){var a=new Be.a,t=d().authTokens,l=Object(n.useState)([]),c=Object(s.a)(l,2),o=c[0],i=c[1],m=Object(n.useState)(""),u=Object(s.a)(m,2),p=u[0],b=u[1],f=Object(n.useState)(),h=Object(s.a)(f,2),v=h[0],O=h[1],j=Object(n.useState)(!1),y=Object(s.a)(j,2),N=y[0],S=y[1],C=Object(n.useState)([]),x=Object(s.a)(C,2),w=x[0],k=x[1],_=Object(n.useState)(!1),T=Object(s.a)(_,2),D=T[0],P=T[1],A=function(){return P(!D)},M=Object(n.useState)(!1),W=Object(s.a)(M,2),I=W[0],z=W[1],U=function(){return z(!I)},F=function(e,a,t){return r.a.createElement(Ie.a,{className:"ml-2",control:r.a.createElement(qe.a,{checked:!!a.isActive,onChange:function(n){return Q(e,a,t)},color:a.isActive?"primary":"default"}),label:a.isActive?"Active":"Inactive"})},Y=function(e){if(e.length>0){return e.map((function(t,n){var r=t,l=t.ship;return[r.id,r.voyage,l.name,r.fromLocation,r.toLocation,a.format(new Date(r.departure),"MMM/d/yyyy h:mm:ss a"),a.format(new Date(r.arrival),"MMM/d/yyyy h:mm:ss a"),F(n,t,e),[n,t]]}))}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?null:Object(va.isArray)(e)?Y(e):null},V=Object(n.useCallback)((function(){S(!0);var e=E.a.cancelToken;g.get("carrier/transport/voyage/ships",{cancelToken:e,headers:{Authorization:"bearer "+t.access_token}}).then((function(e){var a=e.data.data,t=e.data.current_page,n=G(a);O(t),i(n),S(!1)})).catch((function(e){S(!1)}))}),[]),J=Object(n.useCallback)((function(){g.get("carrier/transport/ships",{headers:{Authorization:"bearer "+t.access_token}}).then((function(e){var a=[];if(e.data.length>0)for(var t in e.data){var n={value:e.data[t].id,label:e.data[t].name};a.push(n)}k(a)}))}),[]),K=Object(va.debounce)((function(e){return X(e)}),500),X=function(e){return g.post("carrier/transport/voyage/search-ship-sched",{name:e},{headers:{Authorization:"bearer "+t.access_token}}).then((function(e){var a=e.data,t=G(a);i(t),S(!1)}))},Q=function(e,a,n){var r=n,l="Activate this schedule?",c="info",s="Activating";a.isActive&&(l="Deactivate this schedule?",c="warning",s="Deactivating"),oe.a.fire({title:"".concat(s," Schedule"),text:l,icon:c,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(n){n.isConfirmed&&g.put("carrier/transport/voyage/status/".concat(a.id),{isActive:!a.isActive},{headers:{Authorization:"bearer "+t.access_token}}).then((function(t){if(t.data.status){r[e].isActive=!a.isActive;var n=G(r);i(n)}else oe.a.fire("Transaction Completed",t.data.message,"error")}))}))},Z=["ID","Voyage No.","Ship Name","Origin","Destination","Estimated Time of Departure","Estimated Time of Arrival","Status",{name:"Actions",options:{customBodyRender:function(e,a,n){return r.a.createElement("div",{style:{color:"#1a1751"}},r.a.createElement(Oa.a,{title:"Edit Schedule",placement:"top"},r.a.createElement(Ce.a,{color:"link",className:"p-1 m-0 btn",onClick:function(){return b(e),void U()}},r.a.createElement(R.a,{icon:H.j}))),r.a.createElement(Oa.a,{title:"Archive Schedule",placement:"top"},r.a.createElement(Ce.a,{color:"link",className:"p-1 m-0 btn text-danger",onClick:function(){return a=e,void oe.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(e){e.isConfirmed&&g.delete("carrier/transport/voyage/delete/".concat(a[1].id),{headers:{Authorization:"bearer "+t.access_token}}).then((function(e){e.data.status?(oe.a.fire("Transaction Completed",e.data.message,"success"),V()):oe.a.fire("Transaction Completed",e.data.message,"error")}))}));var a}},r.a.createElement(R.a,{icon:H.b}))))}}}],$={fixHeader:!0,filterType:"dropdown",responsive:"vertical",tableBodyHeight:"350px",selectableRows:"none",filter:!1,viewColumns:!1,elevation:0,print:!1,download:!1,rowsPerPage:5,rowsPerPageOptions:[5,30,100],onChangePage:function(e){var a;e%2!==0&&e>=v&&(a=v+1,g.get("carrier/transport/voyage?page=".concat(a),{headers:{Authorization:"bearer "+t.access_token}}).then((function(e){var a=e.data.data,t=[],n=G(a);e.data.current_page>v&&(O(e.data.current_page),t=void 0!==n?[].concat(Object(Le.a)(o),Object(Le.a)(n)):o),i(t)})))},onSearchClose:function(){S(!1),V()},searchProps:{onKeyUp:function(e){var a=e.target.value;a.length>=2&&(S(!0),K(a))}},customSearch:function(e,a,t){return o.length>0}};return Object(n.useEffect)((function(){return V(),J(),function(){}}),[V,J]),r.a.createElement(rt.Provider,{value:{loadSchedules:V,selectedSchedule:p}},r.a.createElement(ct.Provider,{value:{shipOptions:w}},r.a.createElement(q.a,{fluid:"true",className:"p-0 m-0 "},r.a.createElement(L.a,{className:"m-0 p-0 text-right"},r.a.createElement(B.a,{md:12},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12,className:"m-0 p-0"},r.a.createElement(mt,{toggle:A})))),r.a.createElement(B.a,{md:12,className:"pl-0 ml-0 pr-0 mr-0 text-left"},r.a.createElement(Sa,{title:"Voyage Schedules",loadSchedules:V,data:o,isLoading:N,columns:Z,options:$})))),D&&r.a.createElement(bt,{isOpen:D,toggle:A}),I&&r.a.createElement(ft,{isOpen:I,toggle:U})))},gt=t(246),ht=t.n(gt),vt=Object(Ca.a)({paper:{}})((function(e){return r.a.createElement(xa.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),Ot=Object(Ca.a)((function(e){return{root:{"&:focus":{"& .MuiListItemIcon-root":{color:"#757575"},"& .MuiListItemText-primary":{color:"#454545"}}}}}))(ue.a);function jt(e){var a=Object(n.useState)(null),t=Object(s.a)(a,2),l=t[0],c=t[1],o=function(){c(null)};return r.a.createElement("div",{className:"mt-1 pt-1 ml-1 float-right"},r.a.createElement(I.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"primary",onClick:function(e){c(e.currentTarget)},className:"p-1 pr-2 pl-2 menuButton"},r.a.createElement(R.a,{icon:H.h,className:"mr-1"})," Options"),r.a.createElement(vt,{id:"customized-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:o},r.a.createElement(Ot,{onClick:function(){return function(a){switch(o(),a){case 1:e.toggle&&e.toggle()}}(1)}},r.a.createElement(aa.a,null,r.a.createElement(ht.a,null)),r.a.createElement(ta.a,{primary:"New Ship"}))))}var yt=function(e){var a=me().transportOptions,t=Object(n.useState)(e.transportType||""),l=Object(s.a)(t,2),c=l[0],o=l[1];return r.a.createElement("div",null,r.a.createElement(v.a,{select:!0,label:"Select Transport Type",name:"transportType",value:e.transportType||c,onChange:function(a){return t=a.target.value,o(t),void e.setTransportType(t);var t},fullWidth:!0,required:!0},a.map((function(e){return r.a.createElement(ue.a,{key:e.value,value:e.value},e.label)}))))},Nt=function(e){var a=d().authTokens.access_token,t=st(),l=me(),c=ge().modalMarginLG,o=Object(n.useState)(!1),i=Object(s.a)(o,2),m=i[0],u=i[1],p=Object(n.useState)(null),b=Object(s.a)(p,2),f=b[0],E=b[1],h=Object(n.useState)(0),O=Object(s.a)(h,2),j=O[0],y=O[1],N=Object(n.useState)(null),S=Object(s.a)(N,2),C=S[0],x=S[1],w=Object(n.useState)(null),k=Object(s.a)(w,2),_=k[0],T=k[1];return r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,toggle:e.toggle,className:"modal-lg",style:{marginTop:"5%",marginLeft:c}},r.a.createElement(je.a,{toggle:e.toggle},r.a.createElement(ht.a,null)," New Ship"),r.a.createElement("form",{onSubmit:function(n){return function(n){n.preventDefault(),u(!0);var r=a,c={name:f,capacity:j,routes:C,transportation_category_id:_};g.post("store/ships/store",c,{headers:{Authorization:"bearer "+r}}).then((function(a){a.data.status?(u(!1),oe.a.fire("Transaction Completed!","Data Successfully Created!","success"),t.loadShips(),l.getShipsOptions(),e.toggle()):(u(!1),oe.a.fire("Transaction Failed!",a.data.message,"error"))})).catch((function(e){u(!1),oe.a.fire("Transaction Failed!","error")}))}(n)}},r.a.createElement(ye.a,null,r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{md:12},r.a.createElement(z.a,null,r.a.createElement(Ne.a,null,r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12,className:"mt-0 pt-0 mb-2 text-danger"},r.a.createElement("h6",null,r.a.createElement(R.a,{icon:H.n})," Note: Each ship name should be unique and please fill in the required (*) fields"))),r.a.createElement(L.a,null,r.a.createElement(B.a,{md:6},r.a.createElement(v.a,{className:"m-0",onChange:function(e){return E(e.target.value)},name:"shipName",label:"Ship Name",required:!0,fullWidth:!0}),r.a.createElement(v.a,{type:"number",InputProps:{inputProps:{min:0}},className:"m-0",onChange:function(e){return y(e.target.value)},name:"capacity",label:"Capacity",required:!0,fullWidth:!0})),r.a.createElement(B.a,{md:6},r.a.createElement(v.a,{className:"m-0",onChange:function(e){return x(e.target.value)},name:"voyageRoute",label:"Route",required:!0,fullWidth:!0}),r.a.createElement(yt,{setTransportType:T}))))))),r.a.createElement("div",null,m&&r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{className:"text-center"},r.a.createElement(Pe,{title:"Creating New Ship Record"}))))),r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{type:"submit",color:"primary",disabled:m,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.w})," Save")," ",r.a.createElement(Ce.a,{color:"danger",onClick:e.toggle,disabled:m,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.G})," Cancel")))))},St=function(e){var a=d().authTokens.access_token,t=st(),l=st().selectedShip,c=ge().modalMarginLG,o=Object(n.useState)(!1),i=Object(s.a)(o,2),m=i[0],u=i[1],p=Object(n.useState)(null),b=Object(s.a)(p,2),f=b[0],E=b[1],h=Object(n.useState)(null),O=Object(s.a)(h,2),j=O[0],y=O[1],N=Object(n.useState)(0),S=Object(s.a)(N,2),C=S[0],x=S[1],w=Object(n.useState)(null),k=Object(s.a)(w,2),_=k[0],T=k[1],D=Object(n.useState)(null),P=Object(s.a)(D,2),A=P[0],M=P[1];return Object(n.useEffect)((function(){return E(l[0].id),y(l[0].name),x(l[0].capacity),T(l[0].routes),M(l[0].transportation_category_id),function(){}}),[l]),r.a.createElement("div",null,r.a.createElement(Oe.a,{backdrop:"static",isOpen:e.isOpen,className:"modal-lg",style:{marginTop:"5%",marginLeft:c}},r.a.createElement(je.a,{toggle:e.toggle},r.a.createElement(R.a,{icon:H.x})," Update Ship"),r.a.createElement("form",{onSubmit:function(n){return function(n){n.preventDefault(),u(!0);var r=a,c={name:j,capacity:C,routes:_,transportation_category_id:A};g.put("carrier/transport/update/".concat(f),c,{headers:{Authorization:"bearer "+r}}).then((function(a){if(a.data.status){u(!1),oe.a.fire("Transaction Completed!","Data Successfully Created!","success"),c.id=f;var n=l[1];t.shipsData[n][1]=j,t.shipsData[n][3]=C,t.shipsData[n][2]=_,t.shipsData[n][4]=[c,n,t.shipsData],e.toggle()}else u(!1),oe.a.fire("Transaction Failed!",a.data.message,"error")})).catch((function(e){u(!1),oe.a.fire("Transaction Failed!","error")}))}(n)}},r.a.createElement(ye.a,null,r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{md:12},r.a.createElement(z.a,null,r.a.createElement(Ne.a,null,r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12,className:"mt-0 pt-0 mb-2 text-danger"},r.a.createElement("h6",null,r.a.createElement(R.a,{icon:H.n})," Note: Each ship name should be unique and please fill in the required (*) fields"))),r.a.createElement(L.a,null,r.a.createElement(B.a,{md:6},r.a.createElement(v.a,{className:"m-0",value:j||"",onChange:function(e){return y(e.target.value)},name:"shipName",label:"Ship Name",required:!0,fullWidth:!0}),r.a.createElement(v.a,{type:"number",InputProps:{inputProps:{min:0}},value:C||"",className:"m-0",onChange:function(e){return x(e.target.value)},name:"capacity",label:"Capacity",required:!0,fullWidth:!0})),r.a.createElement(B.a,{md:6},r.a.createElement(v.a,{className:"m-0",value:_||"",onChange:function(e){return T(e.target.value)},name:"voyageRoute",label:"Route",required:!0,fullWidth:!0}),r.a.createElement(yt,{transportType:A,setTransportType:M}))))))),r.a.createElement("div",null,m&&r.a.createElement(L.a,{className:"p-2"},r.a.createElement(B.a,{className:"text-center"},r.a.createElement(Pe,{title:"Updating Ship Record"}))))),r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{type:"submit",color:"primary",disabled:m,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.w})," Save")," ",r.a.createElement(Ce.a,{color:"danger",onClick:e.toggle,disabled:m,style:{minWidth:"120px"}},r.a.createElement(R.a,{icon:H.G})," Cancel")))))},Ct=(t(750),function(e){var a=d().authTokens,t=me(),l=Object(n.useState)([]),c=Object(s.a)(l,2),o=c[0],i=c[1],m=Object(n.useState)({}),u=Object(s.a)(m,2),p=u[0],b=u[1],f=Object(n.useState)(),h=Object(s.a)(f,2),v=h[0],O=h[1],j=Object(n.useState)(!1),y=Object(s.a)(j,2),N=y[0],S=y[1],C=Object(n.useState)(!1),x=Object(s.a)(C,2),w=x[0],k=x[1],_=function(){return k(!w)},T=Object(n.useState)(!1),D=Object(s.a)(T,2),P=D[0],A=D[1],M=function(){return A(!P)},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?null:Object(va.isArray)(e)?z(e):I(e)},I=function(e){for(var a=[],t=0,n=0,r=Object.entries(e);n<r.length;n++){var l=Object(s.a)(r[n],2),c=(l[0],l[1]);a[t]=[c.id,c.name,c.routes,c.capacity,[c,t,e]],t++}return a},z=function(e){if(e.length>0)return e.map((function(a,t){return[a.id,a.name,a.routes,a.capacity,[a,t,e]]}))},U=Object(n.useCallback)((function(){S(!0);var e=E.a.cancelToken;g.get("carrier/transport/ships",{cancelToken:e,headers:{Authorization:"bearer "+a.access_token}}).then((function(e){var a=e.data,t=e.data.current_page;if(Object.keys(a).length>0){var n=W(a);O(t),i(n)}S(!1)})).catch((function(e){S(!1)}))}),[]),F=Object(va.debounce)((function(e){return Y(e)}),500),Y=function(e){return g.post("carrier/transport/voyage/search-our-ship",{name:e},{headers:{Authorization:"bearer "+a.access_token}}).then((function(e){var a=e.data,t=W(a);i(t),S(!1)}))},G=["ID","Name","Route","Capacity",{name:"Actions",options:{customBodyRender:function(e,n,l){return r.a.createElement("div",{style:{color:"#1a1751"}},r.a.createElement(Oa.a,{title:"Update Ship Details",placement:"top"},r.a.createElement(Ce.a,{color:"link",className:"p-1 m-0 btn",onClick:function(){return function(e){b(e),M()}(e)}},r.a.createElement(R.a,{icon:H.j}))),r.a.createElement(Oa.a,{title:"Archive Ship",placement:"top"},r.a.createElement(Ce.a,{color:"link",className:"p-1 m-0 btn text-danger",onClick:function(){return function(e){var n=e[2];oe.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes"}).then((function(r){r.isConfirmed&&g.delete("carrier/transport/delete/".concat(e[0].id),{headers:{Authorization:"bearer "+a.access_token}}).then((function(a){a.data.status?(oe.a.fire("Transaction Completed",a.data.message,"success"),n.splice(e[1],1),n=W(n),i(n),t.getShipsOptions()):oe.a.fire("Transaction Completed",a.data.message,"error")}))}))}(e)}},r.a.createElement(R.a,{icon:H.b}))))}}}],V={fixHeader:!0,filterType:"dropdown",responsive:"vertical",tableBodyHeight:"350px",selectableRows:"none",filter:!1,viewColumns:!1,elevation:0,print:!1,download:!1,rowsPerPage:5,rowsPerPageOptions:[5,30,100],onChangePage:function(e){var t;e%2!==0&&e>=v&&(t=v+1,g.get("carrier/transport?page=".concat(t),{headers:{Authorization:"bearer "+a.access_token}}).then((function(e){var a=e.data.data,t=[],n=W(a);e.data.current_page>v&&(O(e.data.current_page),t=void 0!==n?[].concat(Object(Le.a)(o),Object(Le.a)(n)):o),i(t)})))},onSearchClose:function(){S(!1),U()},searchProps:{onKeyUp:function(e){var a=e.target.value;a.length>=2&&(S(!0),F(a))}},customSearch:function(e,a,t){return o.length>0}};return Object(n.useEffect)((function(){return U(),function(){}}),[U]),r.a.createElement(ct.Provider,{value:{shipsData:o,selectedShip:p,loadShips:U}},r.a.createElement(q.a,{fluid:"true",className:"p-0 m-0"},r.a.createElement(L.a,{className:"m-0 p-0 text-right"},r.a.createElement(B.a,{md:12},r.a.createElement(L.a,null,r.a.createElement(B.a,{md:12,className:"m-0 p-0"},r.a.createElement(jt,{toggle:_})))),r.a.createElement(B.a,{md:12,className:"pl-0 ml-0 pr-0 mr-0 text-left"},r.a.createElement(Sa,{title:"Ships",data:o,isLoading:N,columns:G,options:V})))),w&&r.a.createElement(Nt,{isOpen:w,toggle:_}),P&&r.a.createElement(St,{isOpen:P,toggle:M}))});t(751);function xt(e){var a=Object(n.useState)("1"),t=Object(s.a)(a,2),l=t[0],c=t[1],o=function(e){c(e)};return r.a.createElement("div",{className:"mt-5 pt-0 mt-0 dashboardTab"},r.a.createElement(Ia.a,{tabs:!0},r.a.createElement(qa.a,null,r.a.createElement(za.a,{className:"1"===l?"active activeTabHeader":"inactiveTab",onClick:function(){return o("1")}},r.a.createElement(R.a,{icon:H.f,className:"tabIcon"})," Schedules")),r.a.createElement(qa.a,null,r.a.createElement(za.a,{className:"2"===l?"active activeTabHeader":"inactiveTab",onClick:function(){return o("2")}},r.a.createElement(R.a,{icon:H.F,className:"tabIcon"})," Passengers")),r.a.createElement(qa.a,null,r.a.createElement(za.a,{className:"3"===l?"active activeTabHeader":"inactiveTab",onClick:function(){return o("3")}},r.a.createElement(Ka.a,{className:"tabIcon"})," Ships"))),r.a.createElement(La.a,{activeTab:l,className:"bg-white m-0 p-0 pl-2 pr-2 pb-2"},r.a.createElement(Ba.a,{tabId:"1",className:"m-0 p-0"},r.a.createElement(Et,null)),r.a.createElement(Ba.a,{tabId:"2",className:"m-0 p-0"},r.a.createElement(nt,null)),r.a.createElement(Ba.a,{tabId:"3",className:"m-0 p-0"},r.a.createElement(Ct,null))))}var wt=Object(h.a)((function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#1a1751"},appBarShift:{width:"calc(100% - ".concat(220,"px)"),marginLeft:220,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:220,flexShrink:0},drawerPaper:{width:220,boxShadow:"1px 0px 10px #000"},drawerHeader:Object(fe.a)(Object(fe.a)({display:"flex",alignItems:"center"},e.mixins.toolbar),{},{backgroundColor:"#FFFFFF",color:"#FFFFFF",margin:"0px",padding:"0px"}),content:{flexGrow:1,padding:e.spacing(4),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-220,justifyContent:"center"},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},large:{width:e.spacing(10),height:e.spacing(10)},nested:{paddingLeft:e.spacing(4)}}}));function kt(e){var a=d(),t=a.authTokens,l=t.details,c=a.authTokens.user,o=wt(),m=Object(n.useState)(!0),u=Object(s.a)(m,2),p=u[0],b=u[1],f=Object(n.useState)(c),h=Object(s.a)(f,2),v=h[0],O=h[1],y=Object(n.useState)({}),N=Object(s.a)(y,2),S=N[0],C=N[1],x=Object(n.useState)(!1),w=Object(s.a)(x,2),k=w[0],_=w[1],T=Object(n.useState)(!1),D=Object(s.a)(T,2),P=D[0],A=D[1],M=Object(n.useState)("20%"),W=Object(s.a)(M,2),I=W[0],q=W[1],z=Object(n.useState)("30%"),L=Object(s.a)(z,2),B=L[0],U=L[1],F=Object(n.useState)([]),Y=Object(s.a)(F,2),G=Y[0],V=Y[1],J=Object(n.useState)([]),K=Object(s.a)(J,2),X=K[0],Q=K[1],Z=Object(n.useState)(!1),$=Object(s.a)(Z,2),ee=$[0],ae=$[1],te=function(){return ae(!ee)},ne=Object(n.useState)(!1),re=Object(s.a)(ne,2),le=re[0],ce=re[1],se=function(){return ce(!le)},oe=Object(n.useState)(!1),me=Object(s.a)(oe,2),ue=me[0],de=me[1],pe=function(){return de(!ue)},fe=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";switch(a){case"/":e.history.push("/");break;case"subaccounts":e.history.push("/sub-accounts")}},ge=function(){g.get("auth/carrier/me",{headers:{Authorization:"bearer "+t.access_token}}).then((function(e){C(e.data)}))},he=Object(n.useCallback)((function(){(function(e){var a=E.a.cancelToken;return g.get("carrier/transport/ships",{cancelToken:a,headers:{Authorization:"bearer "+e.access_token}})})(t).then((function(e){var a=[];if(e.data.length>0)for(var t in e.data){var n={value:e.data[t].id,label:e.data[t].name};a.push(n)}V(a)}))}),[]),Oe=Object(n.useCallback)((function(){(function(e){var a=E.a.cancelToken;return g.get("carrier/transport/category",{cancelToken:a,headers:{Authorization:"bearer "+e.access_token}})})(t).then((function(e){var a=[];if(e.data.length>0)for(var t in e.data){var n={value:e.data[t].id,label:e.data[t].name};a.push(n)}Q(a)}))}),[]);return Object(n.useEffect)((function(){return ge(),he(),Oe(),function(){}}),[]),r.a.createElement(Ee.Provider,{value:{modalMarginXL:I,modalMarginLG:B}},r.a.createElement(Me.Provider,{value:{setUsername:O,profileDetails:S,getProfileDetails:ge}},r.a.createElement(ie.Provider,{value:{getShipsOptions:he,shipOptions:G,getTransportOptions:Oe,transportOptions:X}},r.a.createElement("div",{className:o.root},r.a.createElement(Xe.a,{position:"fixed",className:Object(Ea.default)(o.appBar,Object(be.a)({},o.appBarShift,p))},r.a.createElement(Qe.a,null,r.a.createElement(j.a,{color:"inherit","aria-label":"open drawer",onClick:function(){b(!p),p?(q("13%"),U("25%")):(q("20%"),U("30%"))},edge:"start",className:Object(Ea.default)(o.menuButton),style:{outline:"none"}},r.a.createElement(la.a,null)),r.a.createElement(_e.a,{variant:"h6",noWrap:!0},r.a.createElement("div",{className:"float-left"},r.a.createElement("img",{src:ve.a,width:"33",height:"35",alt:"EMS Logo"})),r.a.createElement("div",{className:"float-left"},r.a.createElement("ul",{className:"p-0 m-0 mt-2 ml-1",style:{listStyle:"none",lineHeight:"0.9rem"}},r.a.createElement("li",{style:{fontSize:"1.5rem"}},"PEMS"),r.a.createElement("li",null,r.a.createElement("small",{style:{fontSize:"0.8rem"}},"Passenger e-Manifest System"))))))),r.a.createElement(Ze.a,{className:o.drawer,variant:"persistent",anchor:"left",open:p,classes:{paper:o.drawerPaper}},r.a.createElement("div",{className:o.drawerHeader},r.a.createElement("div",{className:"container-fluid text-left mb-2",style:{color:"#1a1751",minHeight:"125px",height:"125px"}},r.a.createElement("div",{className:"text-center mt-4 pb-2 border-bottom"},r.a.createElement(sa.a,{style:{width:"45px",height:"50px"}}),r.a.createElement("ul",{className:"m-0 p-0 mt-2",style:{listStyle:"none",lineHeight:"1em"}},r.a.createElement("li",{className:"border p-1 bg-primary text-white"},r.a.createElement("strong",null,v.toUpperCase())),r.a.createElement("li",{className:"mt-2"},"Company"))))),r.a.createElement($e.a,{style:{display:"flex",flexDirection:"column"}},r.a.createElement(ea.a,{className:"mt-4",button:!0,onClick:function(){return fe("/")}},r.a.createElement(aa.a,null,r.a.createElement(ia.a,null)),r.a.createElement(ta.a,{primary:"Dashboard"})),r.a.createElement(ea.a,{button:!0,onClick:function(){A(!P)}},r.a.createElement(aa.a,null,r.a.createElement(R.a,{icon:H.t,size:"lg"})),r.a.createElement(ta.a,{primary:"Reports"}),P?r.a.createElement(fa.a,null):r.a.createElement(pa.a,null)),r.a.createElement(na.a,{in:P,timeout:"auto",unmountOnExit:!0},r.a.createElement($e.a,{component:"div",disablePadding:!0},r.a.createElement(ea.a,{button:!0,onClick:function(){return function(e){switch(e){case 1:pe()}}(1)},className:o.nested},r.a.createElement(aa.a,null,r.a.createElement(R.a,{icon:H.l})),r.a.createElement(ta.a,{primary:"Manifest"})))),r.a.createElement(ea.a,{button:!0,onClick:function(){_(!k)}},r.a.createElement(aa.a,null,r.a.createElement(R.a,{icon:H.h,size:"lg"})),r.a.createElement(ta.a,{primary:"Manage"}),k?r.a.createElement(fa.a,null):r.a.createElement(pa.a,null)),r.a.createElement(na.a,{in:k,timeout:"auto",unmountOnExit:!0},r.a.createElement($e.a,{component:"div",disablePadding:!0},r.a.createElement(ea.a,{button:!0,onClick:te,className:o.nested},r.a.createElement(aa.a,null,r.a.createElement(R.a,{icon:H.o})),r.a.createElement(ta.a,{primary:"My Password"}))),r.a.createElement($e.a,{component:"div",disablePadding:!0},r.a.createElement(ea.a,{button:!0,onClick:se,className:o.nested},r.a.createElement(aa.a,null,r.a.createElement(R.a,{icon:H.B})),r.a.createElement(ta.a,{primary:"My Profile"}))),"main"===l.type&&r.a.createElement($e.a,{component:"div",disablePadding:!0},r.a.createElement(ea.a,{button:!0,onClick:function(){return fe("subaccounts")},className:o.nested},r.a.createElement(aa.a,null,r.a.createElement(R.a,{icon:H.F})),r.a.createElement(ta.a,{primary:"Sub Accounts"})))),r.a.createElement(ea.a,{button:!0,onClick:function(){return sessionStorage.removeItem("transporttokens"),void window.location.reload()}},r.a.createElement(aa.a,null,r.a.createElement(ua.a,null)),r.a.createElement(ta.a,{primary:"Logout"})))),r.a.createElement("main",{className:Object(Ea.default)(o.content,Object(be.a)({},o.contentShift,p))},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/"},r.a.createElement(xt,null)),r.a.createElement(i.b,{exact:!0,path:"/sub-accounts"},r.a.createElement(Wa,null))),ee&&r.a.createElement(Ae,{isOpen:ee,toggle:te}),le&&r.a.createElement(ze,{isOpen:le,toggle:se}),ue&&r.a.createElement(Ke,{isOpen:ue,toggle:pe}))))))}var _t=function(e){Object($.a)(t,e);var a=Object(ee.a)(t);function t(){return Object(Q.a)(this,t),a.apply(this,arguments)}return Object(Z.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container card",style:{marginTop:"10%"}},r.a.createElement("div",{className:"row h-100"},r.a.createElement("div",{className:"col-sm-12 text-center"},r.a.createElement("h3",{className:"text-danger  p-1 m-4"},r.a.createElement("b",null,"Error 404: ")," Page Not Found"))))}}]),t}(n.Component),Tt=function(e){var a=JSON.parse(sessionStorage.getItem("transporttokens")),t=Object(n.useState)(a),l=Object(s.a)(t,2),c=l[0],m=l[1];return r.a.createElement(u.Provider,{value:{authTokens:c,setAuthTokens:function(e){sessionStorage.setItem("transporttokens",JSON.stringify(e)),m(e)}}},r.a.createElement(o.a,{basename:"/marina/module/transport"},r.a.createElement(i.d,null,r.a.createElement(p,{exact:!0,path:"/",component:kt}),r.a.createElement(b,{exact:!0,path:"/sub-accounts",component:kt}),r.a.createElement(i.b,{exact:!0,path:"/login",component:ce}),r.a.createElement(i.b,{exact:!0,path:"/register",component:pe}),r.a.createElement(i.b,{component:_t}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Tt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[470,1,2]]]);
//# sourceMappingURL=main.2c9fc815.chunk.js.map